_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[133],{"0LUh":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("cpVT"),o=n("nKUr"),i=(n("q1tI"),n("pDQI"));function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e){return Object(o.jsxs)(i.a,c(c({strokeWidth:3},e),{},{children:[Object(o.jsx)("path",{d:"M1 12C1 12 5 4 12 4C19 4 23 12 23 12C23 12 19 20 12 20C5 20 1 12 1 12Z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),Object(o.jsx)("path",{d:"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}))}},"3gM7":function(e,t,n){"use strict";var r=n("vJKn"),o=n.n(r),i=n("rg98"),a=n("G5Ub");t.a=function(){var e=Object(i.a)(o.a.mark((function e(t,n){var r,i,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}r=t.user,e.next=13;break;case 4:if(!((i=n.getState().user)&&i.userInfo.isLoggedIn&&i.userInfo)){e.next=9;break}r=i.userInfo,e.next=13;break;case 9:return e.next=11,Object(a.b)("/is_authenticated");case 11:(c=e.sent).success&&(r=c.user);case 13:return r&&(t&&(r=JSON.parse(JSON.stringify(r))),n.dispatch({type:"FETCH_USER_INFO_SUCCESS",user:r})),e.abrupt("return",{user:r});case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},"4Njq":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=n("SXYe").a.tabletMin},"4reG":function(e,t,n){"use strict";n.r(t),n.d(t,"Viewer",(function(){return j})),n.d(t,"Component",(function(){return f})),n.d(t,"reducer",(function(){return x}));var r=n("nKUr"),o=n("xvhg"),i=n("MX0m"),a=n.n(i),c=(n("q1tI"),n("EQ2k")),s=n("gfZM"),l=n("dI/k"),d=n("Qbrf"),u=n("S6NQ"),p=n("h7rM"),b=n("/MKj"),j=function(e){var t=e.content,n=e.mime;if(n.startsWith("video/"))return Object(r.jsx)("video",{src:"data:".concat(n,";base64,").concat(t),style:{maxHeight:"100%",maxWidth:"100%"},controls:!0});if(n.startsWith("image/"))return Object(r.jsx)("img",{src:"data:".concat(n,";base64,").concat(t),style:{maxHeight:"100%",maxWidth:"100%"}});if(n.startsWith("audio/")){var o=n;return"audio/wave"===o&&(o="audio/wav"),Object(r.jsx)("audio",{src:"data:".concat(o,";base64,").concat(t),style:{maxHeight:"100%",maxWidth:"100%"},controls:!0})}return"application/pdf"===n?Object(r.jsx)("object",{data:"data:".concat(n,";base64,").concat(t),type:"application/pdf",style:{width:"100%",height:"100%"},children:Object(r.jsx)("embed",{src:"data:".concat(n,";base64,").concat(t),type:"application/pdf",style:{width:"100%",height:"100%"}})}):Object(r.jsx)("div",{children:"File type not supported"})},f=function(e){var t=e.wid,n=e.pud,i=e.style,d=Object(p.b)(t,n,"mediaview2"),u=Object(o.a)(d,1)[0].files,f=Object(b.f)((function(e){return e.workspace[t].activeFile}));if(!f||!Object(l.j)(f))return Object(r.jsx)("div",{style:i,children:"No file to show"});var x=u[f],m=Object(r.jsx)("div",{children:"File loading, please wait..."}),g=null;if(x&&x.loaded){var h=s.a.from(x.content).toString("base64");g=Object(r.jsxs)(r.Fragment,{children:["Some files may fail to load on the browser."," ",Object(r.jsx)("a",{href:"data:text/plain;base64,".concat(h),download:Object(l.c)(f),children:"Click here to download"})]}),m=Object(r.jsx)(j,{content:h,mime:Object(l.d)(f)})}return Object(r.jsxs)("div",{style:i,className:a.a.dynamic([["3386734190",[c.a.gray85]]])+" mediaview",children:[Object(r.jsx)("div",{className:a.a.dynamic([["3386734190",[c.a.gray85]]])+" mediaview-download",children:g}),Object(r.jsx)("div",{className:a.a.dynamic([["3386734190",[c.a.gray85]]])+" mediaview-content",children:m}),Object(r.jsx)(a.a,{id:"3386734190",dynamic:[c.a.gray85],children:[".mediaview.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;background:#0e0e0e;}",".mediaview-download.__jsx-style-dynamic-selector{text-align:center;width:100%;color:".concat(c.a.gray85,";padding:10px;}"),".mediaview-content.__jsx-style-dynamic-selector{min-height:0;-webkit-flex:1;-ms-flex:1;flex:1;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]})]})},x=Object(d.a)({files:u.a})},69:function(e,t,n){n("j36g"),e.exports=n("zWI3")},"6wo1":function(e,t,n){"use strict";var r=n("nKUr"),o=n("MX0m"),i=n.n(o),a=(n("q1tI"),n("up5I"));t.a=function(e){return Object(r.jsxs)("div",{className:"jsx-2160583212 wrap",children:[Object(r.jsxs)("div",{className:"jsx-2160583212 title",children:["Delete ",e.name||e.entityType]}),Object(r.jsxs)("div",{className:"jsx-2160583212 text",children:["Are you sure you want to delete this ",e.entityType,"? This cannot be undone."]}),Object(r.jsxs)("div",{className:"jsx-2160583212 buttons",children:[Object(r.jsxs)(a.a,{color:"negative",onClick:function(){e.delete(),e.hideModal()},children:["Yes, delete this ",e.entityType]}),Object(r.jsx)(a.a,{onClick:e.hideModal,autoFocus:!0,children:"Cancel"})]}),Object(r.jsx)(i.a,{id:"2160583212",children:[".wrap.jsx-2160583212{background-color:var(--color-background-1);border-radius:var(--border-radius-1);color:var(--color-foreground-1);}",".title.jsx-2160583212{color:var(--color-red-1);}",".wrap.jsx-2160583212{max-width:600px;padding:35px 25px 35px;display:grid;grid-row-gap:25px;}",".buttons.jsx-2160583212{display:grid;grid-row-gap:20px;}",".title.jsx-2160583212{font-size:20px;}",".text.jsx-2160583212{margin-bottom:5px;}","@media screen and (min-width:400px){.buttons.jsx-2160583212{grid-auto-flow:column;grid-column-gap:20px;-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;}.buttons.jsx-2160583212>button:first-child{-webkit-order:1;-ms-flex-order:1;order:1;}}","@media screen and (min-width:600px){.wrap.jsx-2160583212{padding:75px 50px 75px;}}"]})]})}},AERv:function(e,t){var n=/^@(\w+)/,r=function(e,t,r){var o=n.exec(t);if(o)return!!r||e(o[0])({type:"link",url:"/@"+o[1],children:[{type:"text",value:o[0],position:{start:e.now()}}]})};r.notInLink=!0,r.locator=function(e,t){var n=e.indexOf("@",t);return 0===n||-1===n||-1!==(n=e.indexOf(" @",t-1))&&n++,n},e.exports={markdownMentionPlugin:function(){var e=this.Parser,t=e.prototype.inlineTokenizers,n=e.prototype.inlineMethods;t.mention=r,n.splice(n.indexOf("text"),0,"mention")},usernameRegExp:n}},Altv:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("z7pX"),o=n("xvhg"),i=n("q1tI"),a=n("Wlt/"),c=n("cpVT");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(e){return/\s/.test(e)};function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=i.useState(null),a=Object(o.a)(r,2),c=a[0],s=a[1],u=i.useCallback(s,[s]),p=i.useRef(t);i.useEffect((function(){p.current=t}),[t]);var b=i.useState(null),j=Object(o.a)(b,2),f=j[0],x=j[1];return i.useEffect((function(){if(c){var e=function(){var e=c.value,t=c.selectionStart;if(t){var n=1===t||d(e[t-2]||""),r=e.length?e[t-1]:null;x((function(o){if(o&&(t<o.index||0===t))return null;if(!r)return o;if(!o&&!n)return o;var i=p.current.includes(r);return o||i?o?d(r)?null:l(l({},o),{},{text:e.slice(o.index,t)}):{index:t,text:"",match:r}:o}))}else x(null)},t=function(){x(null)};return c.addEventListener("focus",e),c.addEventListener("keyup",e),c.addEventListener("blur",t),function(){x(null),c.removeEventListener("focus",e),c.removeEventListener("keyup",e),c.removeEventListener("blur",t)}}}),[c,x]),[f,u]}function p(e){var t=i.useRef(e);i.useEffect((function(){t.current=e}),[e]);var n=i.useState(!1),c=Object(o.a)(n,2),s=c[0],l=c[1],d=i.useState(null),p=Object(o.a)(d,2),b=p[0],j=p[1],f=u.apply(void 0,Object(r.a)(Object.keys(e))),x=Object(o.a)(f,2),m=x[0],g=x[1],h=i.useRef(m);i.useEffect((function(){h.current=m}),[m]);var v=Object(a.a)(m,100);return i.useEffect((function(){if(v){var e=v.match,n=v.text,r=t.current[e]?t.current[e]:null;if(r){var o=!1;return l(!0),r(n).then((function(e){o||h.current===v&&(l(!1),j({textTrigger:v,results:e,applySuggestion:function(e){var t=e.targetValue,n=e.suggestionValue,r=t.slice(0,v.index),o=n,i=t.slice(v.index+v.text.length);i&&i.startsWith(" ")||(o+=" ");var a=r+o+i;return{cursorIndex:(r+o).length+(i&&i.startsWith(" ")?1:0),fullValue:a}}}))})),function(){o=!0}}j(null)}else j(null)}),[v,j]),[{isLoading:s,suggestions:b},g]}},Mjqs:function(e,t,n){"use strict";n.d(t,"a",(function(){return dt}));var r=n("nKUr"),o=n("xvhg"),i=n("q1tI"),a=n("g7Gn"),c=n("uMio"),s=n("MX0m"),l=n.n(s),d=n("fA4Q"),u=n("VOEV"),p=n("2lQ7"),b=n.n(p),j=n("dI/k"),f=n("hzRC"),x=n("+Jnw"),m=n("4reG"),g=n("gfZM"),h=n("vJKn"),v=n.n(h),O=n("rg98"),y=n("8v8i"),w=n("8/ze"),k=n("7EIp"),_=n("roZX"),C=n("icXl"),E=n("v0rv");function S(e){var t=e.fs,n=e.language,o=e.activePath,i=e.onNodeClick;return Object(r.jsx)(_.a,{children:Object(r.jsxs)("div",{className:"jsx-48542386 filetree",children:[Object(r.jsx)("span",{className:"jsx-48542386 eyebrow",children:"Files"}),Object(r.jsx)(E.a,{height:1}),Object(r.jsx)(k.a,{siblings:[],readOnly:!0,uploadFiles:function(){},onClick:function(){return null},pendingFileType:null,onRename:function(){return null},onDelete:function(){return null},getNodeType:Object(O.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",y.d.File);case 1:case"end":return e.stop()}}),e)}))),overwriteNode:function(){return null},setPendingFileType:function(){},activePath:o,onNodeClick:i,path:w.a,transformChildren:Object(C.a)(n),fs:t}),Object(r.jsx)(l.a,{id:"48542386",children:[".filetree.jsx-48542386{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;padding:var(--spacing-1);overflow:auto;height:100%;}",".eyebrow.jsx-48542386{font-size:var(--font-size-desktop-text-xsmall);text-transform:uppercase;-webkit-letter-spacing:1px;-moz-letter-spacing:1px;-ms-letter-spacing:1px;letter-spacing:1px;font-weight:var(--font-weight-medium);color:var(--color-foreground-2);}"]})]})})}var R=n("Hxkj"),N=n("XmHG"),P=n("4Njq"),I=n("cpVT"),U=n("Vvt1"),D=n.n(U),L=n("RB+8");function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){Object(I.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=function(){var e=Object(O.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.e(65).then(n.t.bind(null,"KMe3",7)).then((function(e){return e.default})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=D()(T,{ssr:!1,loading:function(){return null}});function V(e){var t=e.contents,n={scrollToContent:!0};try{n=F(F({},n),JSON.parse(t||"{}"))}catch(b){}var a=Object(L.f)(),c=i.useRef(null),s=i.useState({width:void 0,height:void 0}),d=Object(o.a)(s,2),u=d[0],p=d[1];return i.useEffect((function(){if(c.current){p({width:c.current.getBoundingClientRect().width,height:c.current.getBoundingClientRect().height});var e=function(){c.current&&p({width:c.current.getBoundingClientRect().width,height:c.current.getBoundingClientRect().height})};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}}),[c]),Object(r.jsxs)("div",{ref:c,className:"jsx-866328784 excalidraw-wrapper",children:[Object(r.jsx)(M,{viewModeEnabled:!0,zenModeEnabled:!0,initialData:n,height:u.height,width:u.width,theme:"replitLight"===a?"light":"dark"}),Object(r.jsx)(l.a,{id:"866328784",children:[".excalidraw-wrapper.jsx-866328784{cursor:all-scroll;height:100%;width:100%;}"]})]})}function W(e){var t=e.fs,n=e.language,a=e.activeFilePath,c=e.onActiveFilePathChange,s=i.useState(null),d=Object(o.a)(s,2),u=d[0],p=d[1],h=i.useState(null),v=Object(o.a)(h,2),O=v[0],k=v[1],_=Boolean(a&&Object(j.j)(a)),C=Boolean(null===a||void 0===a?void 0:a.endsWith(".md")),E=Object(j.h)(a||""),I=a&&!_&&!C&&!E,U=i.useState(a?{path:a,type:y.d.File}:null),D=Object(o.a)(U,2),L=D[0],z=D[1],F=i.useRef(c);i.useEffect((function(){(null===L||void 0===L?void 0:L.type)===y.d.File&&F.current(L.path)}),[L]),i.useEffect((function(){F.current=c}),[c]),i.useLayoutEffect((function(){F.current(a||void 0)}),[a]),i.useEffect((function(){if(!a){var e=!1;t.readDir(w.a).then((function(t){if(!e){if(t.error)throw new Error(t.error);var r=t.children.filter((function(e){return e.type===y.d.File})).map((function(e){return e.filename})),o=Object(R.a)(r,n);if(o)return z({path:o,type:y.d.File}),function(){e=!0}}}))}}),[a,n,t]),i.useEffect((function(){if(a){var e=!1;return k(null),t.readFile(a).then((function(t){e||k(t)})),function(){e=!0}}k(null)}),[t,a]),i.useEffect((function(){u&&(u.setOptions({fontSize:13,scrollPastEnd:!1,highlightActiveLine:!1}),u.getRenderer().setScrollMargin(8,8,0,0))}),[u]),i.useEffect((function(){u&&I&&O&&!O.error&&(u.setPath(a||""),u.setValue(O.content.toString()))}),[u,O,a,I]);var T=Object(N.g)({fs:t}),M=i.useCallback((function(e){var t=e.src;return Object(r.jsx)(N.a,{previewFilePath:a,src:t,getImageContent:T})}),[T,a]);return Object(r.jsxs)("div",{className:l.a.dynamic([["3361494758",[P.a]]])+" file-viewer",children:[Object(r.jsx)("div",{className:l.a.dynamic([["3361494758",[P.a]]])+" file-tree",children:Object(r.jsx)(S,{language:n,fs:t,activePath:(null===L||void 0===L?void 0:L.path)||null,onNodeClick:z})}),Object(r.jsx)("div",{className:l.a.dynamic([["3361494758",[P.a]]])+" content",children:a?Object(r.jsxs)(r.Fragment,{children:[_&&O&&!O.error?Object(r.jsx)(m.Viewer,{content:g.a.from(O.content).toString("base64"),mime:Object(j.d)(a)}):null,_&&!O?Object(r.jsx)("div",{className:l.a.dynamic([["3361494758",[P.a]]])+" file-loader",children:Object(r.jsx)(f.a,{})}):null,C&&O&&!O.error?Object(r.jsx)("div",{className:l.a.dynamic([["3361494758",[P.a]]])+" markdown",children:Object(r.jsx)(x.a,{renderers:{image:M},plugins:[b.a],source:O.content.toString()})}):null,C&&!O?Object(r.jsx)("div",{className:l.a.dynamic([["3361494758",[P.a]]])+" file-loader",children:Object(r.jsx)(f.a,{})}):null,E&&O&&!O.error?Object(r.jsx)("div",{className:l.a.dynamic([["3361494758",[P.a]]])+" draw",children:Object(r.jsx)(V,{contents:O.content.toString()})}):null,E&&!O?Object(r.jsx)("div",{className:l.a.dynamic([["3361494758",[P.a]]])+" file-loader",children:Object(r.jsx)(f.a,{})}):null,I?Object(r.jsx)(f.b,{isLoading:I&&!O,initialOptions:{readOnly:!0,useWorker:!1},editorRef:p}):null]}):Object(r.jsx)(f.a,{})}),Object(r.jsx)(l.a,{id:"3361494758",dynamic:[P.a],children:[".file-viewer.__jsx-style-dynamic-selector{position:absolute;top:0;left:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;align:stretch;height:100%;width:100%;}",".ace_editor{font-size:var(--font-size-desktop-text-small) !important;}",".markdown.__jsx-style-dynamic-selector{word-break:break-word;max-width:840px;margin:0 auto;padding:var(--spacing-2);overflow-y:auto;position:relative;height:100%;}",".draw.__jsx-style-dynamic-selector{height:100%;width:100%;}",".file-tree.__jsx-style-dynamic-selector{background-color:var(--color-background-2);border-radius:var(--border-radius-2);overflow:auto;display:none;}",".content.__jsx-style-dynamic-selector{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;width:100%;height:100%;overflow-y:auto;position:relative;}",".file-loader.__jsx-style-dynamic-selector{width:100%;padding-top:var(--spacing-1);padding-left:var(--spacing-1);position:absolute;top:0;left:0;z-index:100;opacity:0;-webkit-animation:fadeIn-__jsx-style-dynamic-selector ease 0s forwards;animation:fadeIn-__jsx-style-dynamic-selector ease 0s forwards;-webkit-animation-delay:200ms;animation-delay:200ms;}","@-webkit-keyframes fadeIn-__jsx-style-dynamic-selector{0%{opacity:0;}100%{opacity:1;}}","@keyframes fadeIn-__jsx-style-dynamic-selector{0%{opacity:0;}100%{opacity:1;}}","@media screen and (min-width:".concat(P.a,"px){.file-tree.__jsx-style-dynamic-selector{display:block;width:260px;}}")]})]})}var q=n("YGlK"),A=n("xom/"),B=n("0HhJ"),G=n("JOwT"),K=n("UWUU"),H=n("kx/0"),X=n("VwSA"),Y=n("nXXz");function J(e){var t=e.path,n=null;if(G.a.includes(t))n=Object(r.jsx)(B.a,{});else{var o=t.split(".").pop();n=o&&o in X.a?Object(r.jsx)(K.LanguageIcon,{language:o,fill:"var(--color-primary-1)"}):Object(r.jsx)(H.a,{})}return Object(r.jsxs)("div",{className:"jsx-1947121232 node-icon",children:[n,Object(r.jsx)(l.a,{id:"1947121232",children:[".node-icon.jsx-1947121232{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;width:24px;height:24px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;color:var(--color-primary-1);}"]})]})}function Q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 bytes";var n=1024,r=t<0?0:t,o=["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,i)).toFixed(r))+" "+o[i]}function Z(e){var t,n=e.activeFilePath,a=e.onActiveFilePathChange,c=e.fs,s=e.container,d=e.language,u=Boolean(n&&Object(j.j)(n)),p=Boolean(null===n||void 0===n?void 0:n.endsWith(".md")),b=n&&!u&&!p,f=i.useState({bytes:0,lines:0}),x=Object(o.a)(f,2),m=x[0],g=x[1],h=i.useState(!1),k=Object(o.a)(h,2),_=k[0],C=k[1],N=i.useState(n?{path:n,type:y.d.File}:null),I=Object(o.a)(N,2),U=I[0],D=I[1],L=i.useRef(a);return i.useEffect((function(){(null===U||void 0===U?void 0:U.type)===y.d.File&&(L.current(U.path),C(!1))}),[U]),i.useEffect((function(){L.current=a}),[a]),i.useLayoutEffect((function(){L.current(n||void 0)}),[n]),i.useEffect((function(){if(!n){var e=!1;c.readDir(w.a).then((function(t){if(!e){if(t.error)throw new Error(t.error);var n=t.children.filter((function(e){return e.type===y.d.File})).map((function(e){return e.filename})),r=Object(R.a)(n,d);if(r)return D({path:r,type:y.d.File}),function(){e=!0}}}))}}),[n,d,c]),i.useEffect((function(){var e=!1;function t(){return(t=Object(O.a)(v.a.mark((function t(){var r,i,a,c,l,d,u,p;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&s){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Promise.all([s.exec("wc","-l",n),s.exec("wc","-c",n)]);case 4:if(a=t.sent,c=Object(o.a)(a,2),l=c[0],d=c[1],!e){t.next=10;break}return t.abrupt("return");case 10:u=d.error?0:null===d||void 0===d||null===(r=d.output)||void 0===r?void 0:r.split(" ")[0],p=l.error?0:null===l||void 0===l||null===(i=l.output)||void 0===i?void 0:i.split(" ")[0],g({bytes:Number(u),lines:Number(p)});case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){e=!0}}),[n,s]),Object(r.jsxs)("div",{className:l.a.dynamic([["4087299427",[n?"visible":"hidden",P.a]]]),children:[Object(r.jsxs)(q.a,{padding:2,align:"center",positions:["bottom"],isOpen:_,onClickOutside:function(){C(!1)},children:[Object(r.jsxs)("div",{onClick:function(){return C(!_)},className:l.a.dynamic([["4087299427",[n?"visible":"hidden",P.a]]])+" file-header",children:[Object(r.jsxs)("div",{className:l.a.dynamic([["4087299427",[n?"visible":"hidden",P.a]]])+" file-path-wrapper",children:[Object(r.jsx)(J,{path:n||"/"}),Object(r.jsx)(E.a,{width:"2px"}),Object(r.jsx)("span",{className:l.a.dynamic([["4087299427",[n?"visible":"hidden",P.a]]])+" file-path",children:n||"Files"}),Object(r.jsx)(E.a,{width:"2px"}),Object(r.jsx)(Y.a,{})]}),m.bytes&&m.lines?Object(r.jsx)("div",{className:l.a.dynamic([["4087299427",[n?"visible":"hidden",P.a]]])+" file-metadata",children:Object(r.jsxs)(A.a,{align:"center",spacing:"4px",wrap:"nowrap",children:[u?Object(r.jsx)("span",{className:l.a.dynamic([["4087299427",[n?"visible":"hidden",P.a]]])+" metadata-text",children:Q(m.bytes)}):null,b||p?Object(r.jsx)("span",{className:l.a.dynamic([["4087299427",[n?"visible":"hidden",P.a]]])+" metadata-text",children:(t=m.lines,"".concat(t>0?t+1:t," lines"))}):null]})}):null]}),Object(r.jsx)("div",{className:l.a.dynamic([["4087299427",[n?"visible":"hidden",P.a]]])+" file-tree",children:Object(r.jsx)(S,{language:d,fs:c,activePath:(null===U||void 0===U?void 0:U.path)||null,onNodeClick:D})})]}),Object(r.jsx)(l.a,{id:"4087299427",dynamic:[n?"visible":"hidden",P.a],children:[".file-header.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}",".file-tree.__jsx-style-dynamic-selector{width:90vw;max-width:200px;height:calc(var(--content-height) - var(--spacing-2));max-height:calc(var(--content-max-height) - var(--spacing-2));}",".file-metadata.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;text-overflow:ellipsis;-webkit-flex:1;-ms-flex:1;flex:1;padding-left:var(--spacing-half);}",".metadata-text.__jsx-style-dynamic-selector{font-size:var(--font-size-desktop-text-xsmall);font-weight:var(--font-weight-regular);color:var(--color-foreground-2);white-space:nowrap;}",".metadata-text.date.__jsx-style-dynamic-selector{font-weight:var(--font-weight-medium);}",".file-path-wrapper.__jsx-style-dynamic-selector{cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:var(--color-primary-1);visibility:".concat(n?"visible":"hidden",";}"),".file-path.__jsx-style-dynamic-selector{position:relative;max-width:100px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:var(--font-weight-medium);color:var(--color-primary-1);font-size:var(--font-size-desktop-text-small);}","@media screen and (min-width:".concat(P.a,"px){.file-header.__jsx-style-dynamic-selector{-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;}.file-path.__jsx-style-dynamic-selector{max-width:140px;}}")]})]})}var $,ee,te,ne=n("TSYQ"),re=n.n(ne),oe=n("zgDP"),ie=n("tZOq"),ae=n("up5I"),ce=n("R84t"),se=n("V4w5"),le=n("TxNz"),de=n("IdsG"),ue=n("+tR8");function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){Object(I.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function je(e){var t=e.withTransparency;return Object(r.jsxs)("button",{className:"jsx-1481163178 "+(re()({"with-transparency":t})||""),children:[Object(r.jsx)(ce.a,{filled:!0}),Object(r.jsx)(l.a,{id:"1481163178",children:["button.jsx-1481163178{--size:110px;width:var(--size);height:var(--size);color:white;background-color:var(--color-positive-1);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;border-radius:50%;border:0 none;box-shadow:var(--shadow-1);cursor:pointer;-webkit-transition:-webkit-transform 100ms ease-in-out;-webkit-transition:transform 100ms ease-in-out;transition:transform 100ms ease-in-out;}","button.with-transparency.jsx-1481163178{background-color:var(--color-positive-transparent-1);}","button.jsx-1481163178:hover{background-color:var(--color-positive-2);-webkit-transform:scale(1.1);-ms-transform:scale(1.1);transform:scale(1.1);}","button.jsx-1481163178:hover svg{-webkit-transform:scale(1.1);-ms-transform:scale(1.1);transform:scale(1.1);}","button.jsx-1481163178:active{background-color:var(--color-positive-3);-webkit-transform:scale(0.9);-ms-transform:scale(0.9);transform:scale(0.9);}","button.jsx-1481163178:focus{outline:none;}","button.jsx-1481163178 svg{-webkit-transition:-webkit-transform 100ms ease-out;-webkit-transition:transform 100ms ease-out;transition:transform 100ms ease-out;height:auto;width:65%;-webkit-filter:drop-shadow(var(--shadow-1));filter:drop-shadow(var(--shadow-1));}"]})]})}function fe(e){var t=e.onClick,n=e.isLoggedIn,a=e.repl,c=i.useRef(null),s=i.useState(!1),d=Object(o.a)(s,2),u=d[0],p=d[1],b=i.useState(null),j=Object(o.a)(b,2),f=j[0],x=j[1],m=i.useState(a.imageUrl),g=Object(o.a)(m,2),h=g[0],v=g[1],O=Object(ie.re)({variables:{replId:a.id}}),y=Object(o.a)(O,1)[0],w=Object(ie.se)({onCompleted:function(e){x(null),v(e.updateRepl.repl.imageUrl)}}),k=Object(o.a)(w,1)[0],_=Object(le.a)({onUpload:function(e){var t=e.url;k({variables:{input:{id:a.id,imageUrl:t}},optimisticResponse:{updateRepl:{__typename:"UpdateReplPayload",repl:be(be({},a),{},{imageUrl:t})}}})},onUploadPreview:function(e){var t=e.dataUrl;v(t)},onError:function(e){x(e.message)}}),C=a.currentUserPermissions.changeImageUrl;return Object(r.jsxs)("div",{onDrop:C?function(e){var t,n;e.preventDefault();var r=null===(t=e.dataTransfer)||void 0===t||null===(n=t.files)||void 0===n?void 0:n[0];r&&(r.type.startsWith("image/")?(x(null),_.uploadImage(r)):x("Expected an image file"))}:void 0,onDragOver:C?function(e){e.preventDefault(),p(!0)}:void 0,onDragLeave:C?function(){return p(!1)}:void 0,className:"jsx-2239557896 "+(re()("output-overlay",{"is-dragging-over":u})||""),children:[h?Object(r.jsxs)("div",{className:"jsx-2239557896 image-wrap",children:[Object(r.jsx)("img",{src:h,alt:a.title,className:"jsx-2239557896"}),Object(r.jsx)("div",{className:"jsx-2239557896 image-overlay"})]}):null,h||!C?Object(r.jsx)("div",{onClick:function(){n&&y(),Object(oe.track)(oe.events.RUN_BUTTON_CLICKED,{context:"replView",overlay:!0}),t()},className:"jsx-2239557896 cta-content-wrap",children:Object(r.jsxs)(A.b,{spacing:2,align:"center",children:[Object(r.jsx)(je,{withTransparency:Boolean(h)}),h?null:Object(r.jsx)(de.a,{foreground:3,children:"This repl has no cover image"})]})}):null,!h&&C?Object(r.jsx)("div",{className:"jsx-2239557896 cta-content-wrap",children:Object(r.jsxs)(A.b,{spacing:2,align:"center",children:[Object(r.jsx)("span",{className:"jsx-2239557896 upload-icon",children:Object(r.jsx)(se.a,{})}),Object(r.jsx)(de.a,{fontWeight:"bold",foreground:2,children:"Drag and drop a cover image"}),Object(r.jsx)(ae.a,{onClick:function(){c.current&&c.current.click()},filled:!1,border:!1,color:"primary",children:"Or select a file"})]})}):null,h&&C?Object(r.jsxs)("div",{className:"jsx-2239557896 image-controls",children:[Object(r.jsxs)(A.a,{spacing:1,justify:"end",children:[Object(r.jsx)(ae.a,{onClick:function(e){e.stopPropagation(),c.current&&c.current.click()},children:h?"Change image":"Add an image"}),h?Object(r.jsx)(ae.a,{Icon:ue.a,color:"negative",onClick:function(e){e.stopPropagation(),k({variables:{input:{id:a.id,imageUrl:null}}})}}):null]}),f?Object(r.jsx)("div",{className:"jsx-2239557896 error",children:f}):null]}):null,C?Object(r.jsx)("input",{ref:c,accept:"image/*",type:"file",onChange:function(e){var t=e.target,n=t.validity,r=t.files;n.valid&&null!==r&&void 0!==r&&r.length&&(x(null),_.uploadImage(r[0]))},className:"jsx-2239557896"}):null,Object(r.jsx)(l.a,{id:"2239557896",children:[".output-overlay.jsx-2239557896{background-color:var(--color-background-1);}",".output-overlay.jsx-2239557896:hover .image-controls.jsx-2239557896{opacity:1;}",".image-controls.jsx-2239557896{opacity:0;}",".cta-content-wrap.jsx-2239557896,.output-overlay.jsx-2239557896,.image-wrap.jsx-2239557896,.image-overlay.jsx-2239557896,img.jsx-2239557896{position:absolute;top:0;left:0;width:100%;height:100%;}","img.jsx-2239557896{object-fit:cover;}",".image-overlay.jsx-2239557896{background:radial-gradient(rgba(0,0,0,0.3),rgba(0,0,0,0.6));background-repeat:no-repeat;}",".image-controls.jsx-2239557896{position:absolute;right:var(--spacing-2);top:var(--spacing-2);}",".cta-content-wrap.jsx-2239557896{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}",".is-dragging-over.jsx-2239557896 .upload-icon.jsx-2239557896{-webkit-transform:scale(1.1);-ms-transform:scale(1.1);transform:scale(1.1);color:var(--color-primary-1);}",".upload-icon.jsx-2239557896{color:var(--color-foreground-2);-webkit-transition:-webkit-transform 100ms ease-out;-webkit-transition:transform 100ms ease-out;transition:transform 100ms ease-out;}",".upload-icon.jsx-2239557896 svg{height:auto;width:48px;}","input.jsx-2239557896{width:0.1px;height:0.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1;}",".error.jsx-2239557896{padding-top:var(--spacing-2);text-align:right;font-size:var(--font-size-desktop-text-small);color:var(--color-negative-1);}"]})]})}!function(e){e[e.Code=0]="Code",e[e.Output=1]="Output"}($||($={})),function(e){e.Running="Running",e.Ended="Ended",e.Stopped="Stopped"}(ee||(ee={})),function(e){e.Webview="Webview",e.Terminal="Terminal",e.ReplboxWebview="ReplboxWebview",e.Vnc="Vnc",e.ReplboxConsole="ReplboxConsole",e.GovalConsole="GovalConsole"}(te||(te={}));var xe=n("YFqc"),me=n.n(xe),ge=n("pDQI");function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){Object(I.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oe(e){return Object(r.jsx)(ge.a,ve(ve({strokeWidth:2},e),{},{children:Object(r.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"4"})}))}var ye=n("rg44"),we=n("+sxT"),ke=n("Wjzo"),_e=n("T0nv"),Ce=n("dhJC"),Ee=n("tidx"),Se=n("8Vt8"),Re=n("FuyV"),Ne=n("V6K1"),Pe=n("VoYB"),Ie=n("ceSv");function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(n),!0).forEach((function(t){Object(I.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Le(e){var t,n,o,i=e.repl,a=e.onClick;return i.owner?(null===(t=i.currentUserEditRequest)||void 0===t?void 0:t.status)===ie.k.Denied?Object(r.jsx)("div",{role:"tooltip","data-microtip-position":"left","aria-label":"Your request has been denied",children:Object(r.jsx)(ae.a,{Icon:ke.a,disabled:!0,children:"Request to edit"})}):(null===(n=i.currentUserEditRequest)||void 0===n?void 0:n.status)===ie.k.Pending?Object(r.jsx)("div",{role:"tooltip","data-microtip-position":"left","aria-label":"You have requested edit access",children:Object(r.jsx)(ae.a,{Icon:Re.a,disabled:!0,children:"Requested"})}):(null===(o=i.currentUserEditRequest)||void 0===o?void 0:o.status)===ie.k.Accepted?null:Object(r.jsx)(ae.a,{color:"primary",onClick:a,children:"Send edit request"}):Object(r.jsx)("div",{role:"tooltip","data-microtip-position":"left","aria-label":"This repl has no owner",children:Object(r.jsx)(ae.a,{Icon:ke.a,disabled:!0,children:"Request to edit"})})}function ze(e){var t=e.repl,n=e.ownerUsername,o=e.onConfirm;return Object(r.jsxs)("div",{className:"jsx-4077445032 wrap",children:[Object(r.jsxs)(A.b,{spacing:3,align:"stretch",children:[Object(r.jsxs)(A.b,{spacing:1,align:"stretch",children:[Object(r.jsx)(Ne.a,{level:3,children:"Edit in workspace"}),t.owner?Object(r.jsxs)(de.a,{children:["You are about to send ",Object(r.jsx)("b",{className:"jsx-4077445032",children:n})," a notification for you to edit ",Object(r.jsx)("b",{className:"jsx-4077445032",children:t.title}),".",Object(r.jsx)("br",{className:"jsx-4077445032"}),Object(r.jsx)("br",{className:"jsx-4077445032"}),"If they approve your request, you\u2019ll be able to edit their repl using multiplayer.",Object(r.jsx)("br",{className:"jsx-4077445032"}),Object(r.jsx)("br",{className:"jsx-4077445032"}),"Want your own copy? Hit fork, and start coding right away!"]}):Object(r.jsx)(de.a,{children:"Hit fork to get your own copy and start coding!"})]}),Object(r.jsxs)(A.a,{align:"center",justify:"end",spacing:1,children:[Object(r.jsx)("div",{className:"jsx-4077445032",children:Object(r.jsx)(Ie.a,{replId:t.id,isLoggedIn:!0,trackingContext:"ReplViewEditInWorkspaceConfirmationDialog"})}),Object(r.jsx)("div",{className:"jsx-4077445032",children:Object(r.jsx)(Le,{repl:t,onClick:o})})]})]}),Object(r.jsx)(l.a,{id:"4077445032",children:[".wrap.jsx-4077445032{background-color:var(--color-background-1);border-radius:var(--border-radius-1);color:var(--color-foreground-1);padding:var(--spacing-4) var(--spacing-4);}"]})]})}function Fe(e){var t,n=e.repl,a=e.isLoggedIn,c=Object(Ce.a)(e,["repl","isLoggedIn"]),s=Object(Pe.a)(),l=s.showError,d=s.showConfirm,u=i.useState(!1),p=Object(o.a)(u,2),b=p[0],j=p[1],f=Object(ie.pe)({variables:{replId:n.id},onCompleted:function(e){"UserError"!==e.createEditRequest.__typename?d("Edit access requested"):l(e.createEditRequest.message)},onError:function(e){return l(e.message)}}),x=Object(o.a)(f,2),m=x[0],g=x[1].loading;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(ae.a,De(De({},c),{},{Icon:ke.a,disabled:g,color:"primary",onClick:function(){g||(Object(oe.track)(oe.events.EDIT_REQUEST_BUTTON_CLICKED,{replId:n.id}),j(!0))},children:g?"Requesting...":"Edit in workspace"})),Object(r.jsx)(Se.a,{width:a?"small":void 0,isOpen:b,onRequestClose:function(){j(!1)},children:a?Object(r.jsx)(ze,{ownerUsername:null===(t=n.owner)||void 0===t?void 0:t.username,repl:n,onConfirm:function(){j(!1),m()},onClose:function(){return j(!1)}}):Object(r.jsx)(Ee.a,{title:"Sign up or log in to fork this repl",onSuccess:function(e){e&&m()}})})]})}function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){Object(I.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ve(e){var t,n=e.viewMode,o=e.onViewModeChange,i=e.repl,a=e.isLoggedIn,c=e.children,s=180;return Object(r.jsxs)("header",{className:l.a.dynamic([["1453417841",[P.a,s,90,90]]])+" "+(re()({"is-code":n===$.Code,"is-output":n===$.Output})||""),children:[Object(r.jsx)("div",{className:l.a.dynamic([["1453417841",[P.a,s,90,90]]])+" view-mode-control",children:Object(r.jsx)("div",{className:l.a.dynamic([["1453417841",[P.a,s,90,90]]])+" segmented-control",children:Object(r.jsx)(we.a,{options:["Output","Code"],selectedOption:n===$.Output?0:1,onChange:function(e){Object(oe.track)(oe.events.SOCIAL_VIEW_VIEW_CHANGED_VIEW_TOGGLE,{view:0===e?"output":"code"}),o(0===e?$.Output:$.Code)},width:"100%"})})}),Object(r.jsx)("div",{className:l.a.dynamic([["1453417841",[P.a,s,90,90]]])+" children-control",children:c}),Object(r.jsxs)("div",{className:l.a.dynamic([["1453417841",[P.a,s,90,90]]])+" edit-control",children:[i.currentUserPermissions.containerWrite?Object(r.jsx)(me.a,Me(Me({},Object(_e.b)(i)),{},{children:Object(r.jsx)("a",{className:l.a.dynamic([["1453417841",[P.a,s,90,90]]]),children:Object(r.jsx)(ae.a,{Icon:ke.a,color:"primary",filled:!1,border:!1,children:"Edit in workspace"})})})):null,"User"!==(null===(t=i.owner)||void 0===t?void 0:t.__typename)||i.currentUserPermissions.containerWrite?null:Object(r.jsx)(Fe,{isLoggedIn:a,repl:i,iconOnRight:!0,Icon:ke.a,color:"primary",filled:!1,border:!1})]}),Object(r.jsx)(l.a,{id:"1453417841",dynamic:[P.a,s,90,90],children:["header.__jsx-style-dynamic-selector{display:grid;grid-template-areas: 'view-mode-control view-mode-control' 'children-control  edit-control';grid-template-rows:auto auto;grid-template-columns:auto auto;border-bottom:1px solid var(--color-border);}",".view-mode-control.__jsx-style-dynamic-selector{padding:var(--spacing-half);grid-area:view-mode-control;}",".children-control.__jsx-style-dynamic-selector,.edit-control.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:var(--spacing-half);}",".children-control.__jsx-style-dynamic-selector{grid-area:children-control;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;}",".children-control > *{max-height:32px !important;}",".edit-control.__jsx-style-dynamic-selector{grid-area:edit-control;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;}","a.__jsx-style-dynamic-selector{-webkit-text-decoration:none !important;text-decoration:none !important;}","@media screen and (min-width:".concat(P.a,"px){header.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;}.view-mode-control.__jsx-style-dynamic-selector,.edit-control.__jsx-style-dynamic-selector{width:50%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:var(--spacing-half);}.children-control.__jsx-style-dynamic-selector{width:").concat(s,"px;position:absolute;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;top:0;left:50%;-webkit-transform:translate(-50%,0);-ms-transform:translate(-50%,0);transform:translate(-50%,0);height:100%;}header.is-code.__jsx-style-dynamic-selector .children-control.__jsx-style-dynamic-selector{display:none;}header.is-output.__jsx-style-dynamic-selector .edit-control.__jsx-style-dynamic-selector{padding-left:").concat(90,"px;}header.is-output.__jsx-style-dynamic-selector .view-mode-control.__jsx-style-dynamic-selector{padding-right:").concat(90,"px;}.segmented-control.__jsx-style-dynamic-selector{width:180px;}}")]})]})}function We(e){var t=e.outputState,n=e.onClick;return t===ee.Stopped?Object(r.jsxs)("div",{onClick:function(){Object(oe.track)(oe.events.RUN_BUTTON_CLICKED,{context:"replView",header:!0,action:"initialRun"}),n()},className:l.a.dynamic([["3176571818",[P.a]]])+" not-run",children:[Object(r.jsxs)(A.a,{spacing:"4px",align:"center",children:[Object(r.jsx)(ce.a,{filled:!0}),Object(r.jsx)(de.a,{size:"small",foreground:3,children:"Not run yet"})]}),Object(r.jsx)(l.a,{id:"3176571818",dynamic:[P.a],children:[".not-run.__jsx-style-dynamic-selector{cursor:pointer;color:var(--color-foreground-3);}","@media screen and (min-width:".concat(P.a,"px){.not-run.__jsx-style-dynamic-selector{margin-left:-8px;}}")]})]}):Object(r.jsxs)("button",{onClick:function(){Object(oe.track)(oe.events.RUN_BUTTON_CLICKED,{context:"replView",header:!0,action:t===ee.Running?"stop":"run"}),n()},className:"jsx-2045167502 "+(re()({run:t===ee.Ended,stop:t===ee.Running})||""),children:[Object(r.jsx)(A.a,{spacing:"4px",align:"center",children:t===ee.Running?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("span",{className:"jsx-2045167502",children:"Stop"}),Object(r.jsx)(Oe,{filled:!0})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("span",{className:"jsx-2045167502",children:"Run"}),Object(r.jsx)(ce.a,{filled:!0})]})}),Object(r.jsx)(l.a,{id:"2045167502",children:["button.jsx-2045167502{cursor:pointer;padding:var(--spacing-1);border-radius:var(--border-radius-2);background-color:transparent;border:none;font-size:var(--font-size-desktop-text-small);font-weight:var(--font-weight-medium);-webkit-transition:color 0.1s,background-color 0.1s;transition:color 0.1s,background-color 0.1s;}","button.jsx-2045167502:focus,button.jsx-2045167502:active{outline:none;}","button.run.jsx-2045167502{background-color:var(--color-positive-transparent-3);color:var(--color-positive-1);}","button.run.jsx-2045167502:hover{background-color:var(--color-positive-1);color:var(--color-white);}","button.stop.jsx-2045167502{background-color:var(--color-control-3);color:var(--color-foreground-2);}","button.stop.jsx-2045167502:hover{background-color:var(--color-control-2);color:var(--color-foreground-1);}"]})]})}function qe(e){var t=e.url,n=e.outputState,o=e.setOutputState;return Object(r.jsxs)("div",{className:l.a.dynamic([["1099207435",[n===ee.Running?"var(--color-control-2)":"var(--color-positive-transparent-2)",n===ee.Running?"var(--color-foreground-2)":"var(--color-positive-1)",n===ee.Running?"var(--color-control-1)":"var(--color-positive-1)",n===ee.Running?"var(--color-foreground-1)":"var(--color-white)",P.a]]])+" output-control",children:[Object(r.jsx)("div",{className:l.a.dynamic([["1099207435",[n===ee.Running?"var(--color-control-2)":"var(--color-positive-transparent-2)",n===ee.Running?"var(--color-foreground-2)":"var(--color-positive-1)",n===ee.Running?"var(--color-control-1)":"var(--color-positive-1)",n===ee.Running?"var(--color-foreground-1)":"var(--color-white)",P.a]]])+" run-button-wrap",children:Object(r.jsx)("button",{onClick:function(){if(n===ee.Stopped)return o(ee.Running),void Object(oe.track)(oe.events.RUN_BUTTON_CLICKED,{context:"replView",type:"webOutput"});n===ee.Running&&o(ee.Stopped)},className:l.a.dynamic([["1099207435",[n===ee.Running?"var(--color-control-2)":"var(--color-positive-transparent-2)",n===ee.Running?"var(--color-foreground-2)":"var(--color-positive-1)",n===ee.Running?"var(--color-control-1)":"var(--color-positive-1)",n===ee.Running?"var(--color-foreground-1)":"var(--color-white)",P.a]]])+" run-button",children:n===ee.Running?Object(r.jsx)(Oe,{filled:!0}):Object(r.jsx)(ce.a,{filled:!0})})}),Object(r.jsx)("span",{className:l.a.dynamic([["1099207435",[n===ee.Running?"var(--color-control-2)":"var(--color-positive-transparent-2)",n===ee.Running?"var(--color-foreground-2)":"var(--color-positive-1)",n===ee.Running?"var(--color-control-1)":"var(--color-positive-1)",n===ee.Running?"var(--color-foreground-1)":"var(--color-white)",P.a]]])+" repl-url-text",children:t.replace(/^https:\/\//,"")}),Object(r.jsx)("div",{className:l.a.dynamic([["1099207435",[n===ee.Running?"var(--color-control-2)":"var(--color-positive-transparent-2)",n===ee.Running?"var(--color-foreground-2)":"var(--color-positive-1)",n===ee.Running?"var(--color-control-1)":"var(--color-positive-1)",n===ee.Running?"var(--color-foreground-1)":"var(--color-white)",P.a]]]),children:Object(r.jsx)("a",{href:t,target:"_blank",className:l.a.dynamic([["1099207435",[n===ee.Running?"var(--color-control-2)":"var(--color-positive-transparent-2)",n===ee.Running?"var(--color-foreground-2)":"var(--color-positive-1)",n===ee.Running?"var(--color-control-1)":"var(--color-positive-1)",n===ee.Running?"var(--color-foreground-1)":"var(--color-white)",P.a]]])+" repl-link",children:Object(r.jsx)(ye.a,{})})}),Object(r.jsx)(l.a,{id:"1099207435",dynamic:[n===ee.Running?"var(--color-control-2)":"var(--color-positive-transparent-2)",n===ee.Running?"var(--color-foreground-2)":"var(--color-positive-1)",n===ee.Running?"var(--color-control-1)":"var(--color-positive-1)",n===ee.Running?"var(--color-foreground-1)":"var(--color-white)",P.a],children:[".output-control.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;}",".run-button-wrap.__jsx-style-dynamic-selector{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;}",".run-button.__jsx-style-dynamic-selector{cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:var(--spacing-half);border-radius:var(--border-radius-2);background-color:".concat(n===ee.Running?"var(--color-control-2)":"var(--color-positive-transparent-2)",";border:none;-webkit-transition:color 0.1s,background-color 0.1s;transition:color 0.1s,background-color 0.1s;color:").concat(n===ee.Running?"var(--color-foreground-2)":"var(--color-positive-1)",";}"),".run-button.__jsx-style-dynamic-selector:hover{background-color:var(--color-positive-1);background-color:".concat(n===ee.Running?"var(--color-control-1)":"var(--color-positive-1)",";color:").concat(n===ee.Running?"var(--color-foreground-1)":"var(--color-white)",";}"),".run-button.__jsx-style-dynamic-selector:focus,.run-button.__jsx-style-dynamic-selector:active{outline:none;}",".repl-url-text.__jsx-style-dynamic-selector{max-width:140px;margin:0 var(--spacing-1);-webkit-flex:1 2 auto;-ms-flex:1 2 auto;flex:1 2 auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:var(--font-size-desktop-text-small);color:var(--color-foreground-2);}",".repl-link.__jsx-style-dynamic-selector{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;color:var(--color-foreground-3);-webkit-transition:0.2s color;transition:0.2s color;}",".repl-link.__jsx-style-dynamic-selector:hover{color:var(--color-foreground-2);}","@media screen and (min-width:".concat(P.a,"px){.repl-url-text.__jsx-style-dynamic-selector{max-width:180px;}}")]})]})}function Ae(e){var t=e.children;return Object(r.jsxs)("div",{className:"jsx-1249681375",children:[t,Object(r.jsx)(l.a,{id:"1249681375",children:["div.jsx-1249681375{background-color:var(--color-background-1);border:1px solid var(--color-border);box-shadow:0px 8px 12px rgba(0,0,0,0.075);border-radius:var(--border-radius-1);overflow:hidden;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}"]})]})}function Be(e){var t=e.children;return Object(r.jsxs)("div",{className:"jsx-2000547365",children:[t,Object(r.jsx)(l.a,{id:"2000547365",children:[".jsx-2000547365{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;position:relative;display:grid;border-bottom-left-radius:var(--border-radius-1);border-bottom-right-radius:var(--border-radius-1);}"]})]})}function Ge(e){var t=e.show,n=e.children,a=i.useState(t),c=Object(o.a)(a,2),s=c[0],d=c[1];return i.useEffect((function(){s||t&&d(!0)}),[t,s,d]),s?Object(r.jsxs)("div",{className:"jsx-427411075 "+(re()({"is-hidden":!t})||""),children:[n,Object(r.jsx)(l.a,{id:"427411075",children:["div.jsx-427411075{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;visibility:visible;position:relative;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;-webkit-box-pack:stretch;-webkit-justify-content:stretch;-ms-flex-pack:stretch;justify-content:stretch;height:100%;width:100%;}","div.is-hidden.jsx-427411075{visibility:hidden;position:absolute;}"]})]}):null}function Ke(e){var t=e.initialViewMode,n=e.repl,a=e.currentUser,c=e.onUnrecoverableError,s=i.useState(void 0),p=Object(o.a)(s,2),b=p[0],j=p[1],f=i.useState(ee.Stopped),x=Object(o.a)(f,2),m=x[0],g=x[1],h=i.useState(t||$.Output),v=Object(o.a)(h,2),O=v[0],y=v[1],w=i.useState(null),k=Object(o.a)(w,2),_=k[0],C=k[1];i.useEffect((function(){if(!_&&(m===ee.Running||O===$.Code)){var e=Object(d.b)({onUnrecoverableError:c}),t=Object(u.a)({container:e});C({container:e,fs:t})}}),[_,O,m,c]);var E=i.useRef(!1);i.useEffect((function(){if(_&&!E.current)return _.container.connect({repl:n,currentUser:a}),E.current=!0,function(){_.container.destroy()}}),[_,n,a]);var S=n.config.domain?"https://".concat(n.config.domain):n.prodUrl,R=Boolean(a);return Object(r.jsxs)(Ae,{children:[Object(r.jsxs)(Ve,{repl:n,viewMode:O,onViewModeChange:y,isLoggedIn:R,children:[O===$.Output?Object(r.jsx)(qe,{url:S,outputState:m,setOutputState:g}):null,O===$.Code&&null!==_&&void 0!==_&&_.fs?Object(r.jsx)(Z,{language:n.language,fs:_.fs,container:_.container,onActiveFilePathChange:j,activeFilePath:b}):null]}),Object(r.jsxs)(Be,{children:[m===ee.Stopped&&O===$.Output?Object(r.jsx)(fe,{isLoggedIn:R,repl:n,onClick:function(){g(ee.Running)}}):null,m===ee.Running?Object(r.jsx)(Ge,{show:O===$.Output,children:Object(r.jsx)("iframe",{sandbox:"allow-forms allow-pointer-lock allow-popups allow-same-origin allow-scripts allow-modals",src:n.devUrl,className:"jsx-898323883"})}):null,Object(r.jsx)(Ge,{show:O===$.Code,children:_?Object(r.jsx)(W,{language:n.language,fs:_.fs,activeFilePath:b,onActiveFilePathChange:j}):null})]}),Object(r.jsx)(l.a,{id:"898323883",children:["iframe.jsx-898323883{width:100%;height:100%;display:block;background-color:var(--color-white);border-bottom-left-radius:var(--border-radius-1);border-bottom-right-radius:var(--border-radius-1);border:0px none;overflow:auto;}"]})]})}var He=n("LI1+"),Xe=n("VZNv"),Ye=n("HADy"),Je=n("gnTG"),Qe=n("Zma6");function Ze(e){var t=e.initialViewMode,n=e.repl,a=e.currentUser,c=e.onUnrecoverableError,s=i.useRef(!1),p=i.useRef(!1),b=i.useState(ee.Stopped),j=Object(o.a)(b,2),f=j[0],x=j[1],m=i.useState(Ye.b.OFFLINE),g=Object(o.a)(m,2),h=g[0],y=g[1],w=i.useState(t||$.Output),k=Object(o.a)(w,2),_=k[0],C=k[1],E=i.useState(void 0),S=Object(o.a)(E,2),R=S[0],N=S[1],P=i.useState(null),I=Object(o.a)(P,2),U=I[0],D=I[1],L=i.useState(!1),z=Object(o.a)(L,2),F=z[0],T=z[1],M=i.useRef(!1);i.useEffect((function(){null!==U&&(M.current=!0)}),[U]);var V=i.useState(null),q=Object(o.a)(V,2),A=q[0],B=q[1];i.useEffect((function(){if(A&&h===Ye.b.IDLE)return s.current&&A.runner.getRunState()===Ye.b.IDLE?(A.runner.run(),p.current=!0,void(s.current=!1)):void(p.current&&x((function(e){return e===ee.Stopped?ee.Stopped:ee.Ended})))}),[A,h]),i.useEffect((function(){h===Ye.b.RUNNING&&M.current&&D("vnc")}),[h]),i.useEffect((function(){A&&f===ee.Running&&(A.runner.getRunState()===Ye.b.IDLE?(A.runner.run(),p.current=!0):s.current=!0)}),[A,f]),i.useEffect((function(){A&&f===ee.Stopped&&A.runner.getRunState()===Ye.b.RUNNING&&(D(null),A.runner.stopRun())}),[A,f]),i.useEffect((function(){if(!A&&(f===ee.Running||_===$.Code)){var e=Object(d.b)({onUnrecoverableError:c}),t=Object(u.a)({container:e}),r=Object(Je.a)({container:e}),o=Object(Xe.a)({container:e,beforeRun:function(){var e=Object(O.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.lang.supportsPackager3){e.next=3;break}return e.next=3,r.installPackages();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});B({container:e,fs:t,runner:o,packager:r})}}),[n,f,_,A,c]);var G=i.useRef(!1);i.useEffect((function(){if(A&&!G.current){A.container.connect({repl:n,currentUser:a}),G.current=!0;var e=A.container.onPortOpened((function(e){e.forwarded&&D(e.isVnc?"vnc":"server")})),t=A.runner.onStateChanged(y),r=A.runner.onOutput((function(){M.current&&T(!0)}));return function(){e(),t(),r(),A.container.destroy()}}}),[A,n,a]);var K=Boolean(a);return Object(r.jsxs)(Ae,{children:[Object(r.jsxs)(Ve,{repl:n,viewMode:_,onViewModeChange:C,isLoggedIn:Boolean(a),children:[_===$.Output?Object(r.jsx)(We,{outputState:f,onClick:function(){if(f===ee.Stopped||f===ee.Ended)return x(ee.Running),void Object(oe.track)(oe.events.RUN_BUTTON_CLICKED,{context:"replView",type:"terminalOutput"});f===ee.Running&&(Object(oe.track)(oe.events.RUN_BUTTON_CLICKED,{context:"replView",type:"terminalOutput",stopping:!0}),x(ee.Stopped))}}):null,_===$.Code&&A?Object(r.jsx)(Z,{language:n.language,fs:A.fs,container:A.container,onActiveFilePathChange:N,activeFilePath:R}):null]}),Object(r.jsxs)(Be,{children:[f===ee.Stopped&&_===$.Output?Object(r.jsx)(fe,{isLoggedIn:K,repl:n,onClick:function(){x(ee.Running)}}):null,Object(r.jsx)(Ge,{show:(f===ee.Running||f===ee.Ended)&&_===$.Output,children:Object(r.jsxs)("div",{className:"jsx-2923522319 "+(re()("output-wrap",{"port-opened":U,"show-footer-terminal":F})||""),children:["vnc"===U&&A?Object(r.jsx)("div",{className:"jsx-2923522319 vnc-wrap",children:Object(r.jsx)(Qe.a,{container:A.container,fs:A.fs})}):null,"server"===U&&A?Object(r.jsx)("div",{className:"jsx-2923522319 iframe-wrap",children:Object(r.jsx)("iframe",{sandbox:"allow-forms allow-pointer-lock allow-popups allow-same-origin allow-scripts allow-modals",src:n.devUrl,className:"jsx-2923522319"})}):null,A?Object(r.jsx)("div",{className:"jsx-2923522319 terminal-wrap",children:Object(r.jsx)(He.d,{packager:A.packager,runner:A.runner,languageHeader:n.lang.header||void 0,onClear:function(){return T(!1)}})}):null]})}),Object(r.jsx)(Ge,{show:_===$.Code&&Boolean(A),children:A?Object(r.jsx)(W,{language:n.language,fs:A.fs,activeFilePath:R,onActiveFilePathChange:N}):null})]}),Object(r.jsx)(l.a,{id:"2923522319",children:[".output-wrap.jsx-2923522319{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}",".vnc-wrap.jsx-2923522319,.iframe-wrap.jsx-2923522319{width:100%;height:100%;}",".terminal-wrap.jsx-2923522319{width:100%;height:100%;}",".port-opened.jsx-2923522319 .terminal-wrap.jsx-2923522319{position:absolute;visibility:hidden;}",".port-opened.show-footer-terminal.jsx-2923522319 .iframe-wrap.jsx-2923522319,.port-opened.show-footer-terminal.jsx-2923522319 .vnc-wrap.jsx-2923522319{-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;height:70%;}",".port-opened.show-footer-terminal.jsx-2923522319 .terminal-wrap.jsx-2923522319{visibility:visible;position:relative;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;height:30%;}",".port-opened.show-footer-terminal.jsx-2923522319 .terminal-wrap.jsx-2923522319>.terminal{border-top-right-radius:0;border-top-left-radius:0;}","iframe.jsx-2923522319{width:100%;height:100%;display:block;background-color:var(--color-white);border-bottom-left-radius:var(--border-radius-1);border-bottom-right-radius:var(--border-radius-1);border:0px none;overflow:auto;}"]})]})}var $e=n("LTTG"),et=n("EP3k");function tt(e){var t=e.replId,n=e.language,a="hostedUrl"in e?e.hostedUrl:void 0,c=i.useState((function(){return Object($e.a)({beforeRun:function(){return Promise.resolve()},getMainFileContents:function(){return"fs"in e?Object(et.a)({language:e.language,fs:e.fs}):Promise.resolve("")}})})),s=Object(o.a)(c,1)[0],d=i.useRef(null);return i.useEffect((function(){if(d.current){s.load({replId:t,language:n,iframeParent:d.current,hostedUrl:a});var e=s.onStateChanged((function(e){e===Ye.b.IDLE&&s.run()}));return function(){e(),s.destroy()}}}),[s,t,n,a]),Object(r.jsxs)("div",{className:"jsx-1810082141 repl-box-wrapper",children:[Object(r.jsx)("div",{ref:d,className:"jsx-1810082141 iframe-container"}),Object(r.jsx)(l.a,{id:"1810082141",children:[".repl-box-wrapper.jsx-1810082141,.iframe-container.jsx-1810082141{height:100%;width:100%;}",".iframe-container.jsx-1810082141 iframe{background:white;width:100%;height:100%;border:none;display:block;border-bottom-right-radius:var(--border-radius-1);border-bottom-left-radius:var(--border-radius-1);}"]})]})}function nt(e){var t=e.initialViewMode,n=e.repl,a=e.currentUser,c=e.onUnrecoverableError,s=i.useState(ee.Stopped),l=Object(o.a)(s,2),p=l[0],b=l[1],j=i.useState(t||$.Output),f=Object(o.a)(j,2),x=f[0],m=f[1],g=i.useState(void 0),h=Object(o.a)(g,2),v=h[0],O=h[1],y="html"===n.language||"kaboom"===n.language,w=i.useState(null),k=Object(o.a)(w,2),_=k[0],C=k[1];i.useEffect((function(){if(!_&&(x===$.Code||!y)){var e=Object(d.b)({onUnrecoverableError:c}),t=Object(u.a)({container:e});C({container:e,fs:t})}}),[_,x,p,c,y]);var E=i.useRef(!1);i.useEffect((function(){if(_&&!E.current)return _.container.connect({repl:n,currentUser:a}),E.current=!0,function(){_.container.destroy()}}),[_,n,a]);var S=n.config.domain?"https://".concat(n.config.domain):n.prodUrl,R=Boolean(a);return Object(r.jsxs)(Ae,{children:[Object(r.jsxs)(Ve,{repl:n,viewMode:x,onViewModeChange:m,isLoggedIn:R,children:[x===$.Output?Object(r.jsx)(qe,{url:S,outputState:p,setOutputState:b}):null,x===$.Code&&null!==_&&void 0!==_&&_.fs?Object(r.jsx)(Z,{language:n.language,fs:_.fs,container:_.container,onActiveFilePathChange:O,activeFilePath:v}):null]}),Object(r.jsxs)(Be,{children:[p===ee.Stopped&&x===$.Output?Object(r.jsx)(fe,{isLoggedIn:R,repl:n,onClick:function(){b(ee.Running)}}):null,p===ee.Running?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Ge,{show:y&&x===$.Output,children:Object(r.jsx)(tt,{replId:n.id,language:"html",displayUrl:S,hostedUrl:n.devUrl})}),Object(r.jsx)(Ge,{show:!y&&x===$.Output,children:_?Object(r.jsx)(tt,{replId:n.id,language:n.language,fs:_.fs}):null})]}):null,Object(r.jsx)(Ge,{show:x===$.Code,children:_?Object(r.jsx)(W,{language:n.language,fs:_.fs,activeFilePath:v,onActiveFilePathChange:O}):null})]})]})}var rt=n("z7pX"),ot=n("8axe"),it=n("5sjI"),at=D()((function(){return Promise.all([n.e(40),n.e(44)]).then(n.bind(null,"yR2o"))}),{loadableGenerated:{webpack:function(){return["yR2o"]},modules:["../../workspace/plugins/console/Console"]}});function ct(e){var t=e.initialViewMode,n=e.repl,a=e.currentUser,c=e.onUnrecoverableError,s=i.useState(""),p=Object(o.a)(s,2),b=p[0],j=p[1],f=i.useState([]),x=Object(o.a)(f,2),m=x[0],g=x[1],h=i.useRef(!1),y=i.useRef(!1),w=i.useState(ee.Stopped),k=Object(o.a)(w,2),_=k[0],C=k[1],E=i.useState(Ye.b.OFFLINE),S=Object(o.a)(E,2),R=S[0],N=S[1],P=i.useState(t||$.Output),I=Object(o.a)(P,2),U=I[0],D=I[1],L=i.useState(void 0),z=Object(o.a)(L,2),F=z[0],T=z[1],M=i.useState(null),V=Object(o.a)(M,2),q=V[0],A=V[1];i.useEffect((function(){if(q&&R===Ye.b.IDLE)return h.current?(q.replbox.run(),y.current=!0,void(h.current=!1)):void(y.current&&C((function(e){return e===ee.Stopped?ee.Stopped:ee.Ended})))}),[q,R]),i.useEffect((function(){q&&_===ee.Running&&(q.replbox.getRunState()===Ye.b.IDLE?(q.replbox.run(),y.current=!0):h.current=!0)}),[q,_]),i.useEffect((function(){q&&_===ee.Stopped&&q.replbox.getRunState()===Ye.b.RUNNING&&q.replbox.stopRun()}),[q,_]),i.useEffect((function(){if(!q&&(_===ee.Running||U===$.Code)){var e=Object(d.b)({onUnrecoverableError:c}),t=Object(u.a)({container:e}),r=Object($e.a)({beforeRun:function(){var e=Object(O.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getMainFileContents:function(){var e=Object(O.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(et.a)({fs:t,language:n.lang.id}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});r.onOutput((function(e){g((function(t){return[].concat(Object(rt.a)(t),[{data:e,type:""}])}))})),A({container:e,fs:t,replbox:r})}}),[n,_,U,q,c]);var B=i.useRef(!1);i.useEffect((function(){if(q&&!B.current){q.container.connect({repl:n,currentUser:a}),B.current=!0,q.replbox.load({language:n.lang.id,replId:n.id});var e=q.replbox.onStateChanged(N);return function(){e(),q.container.destroy()}}}),[q,n,a]);var G=n.lang.header,K={data:"".concat(G,"\n"),type:""},H=G?[K].concat(Object(rt.a)(m)):m,X=Boolean(a);return Object(r.jsxs)(Ae,{children:[Object(r.jsxs)(Ve,{repl:n,viewMode:U,onViewModeChange:D,isLoggedIn:Boolean(a),children:[U===$.Output?Object(r.jsx)(We,{outputState:_,onClick:function(){if(_===ee.Stopped||_===ee.Ended)return C(ee.Running),void Object(oe.track)(oe.events.RUN_BUTTON_CLICKED,{context:"replView",type:"consoleOutput"});_===ee.Running&&(Object(oe.track)(oe.events.RUN_BUTTON_CLICKED,{context:"replView",type:"consoleOutput",stopping:!0}),C(ee.Stopped))}}):null,U===$.Code&&q?Object(r.jsx)(Z,{language:n.language,fs:q.fs,container:q.container,onActiveFilePathChange:T,activeFilePath:F}):null]}),Object(r.jsxs)(Be,{children:[_===ee.Stopped&&U===$.Output?Object(r.jsx)(fe,{isLoggedIn:X,repl:n,onClick:function(){C(ee.Running)}}):null,Object(r.jsx)(Ge,{show:(_===ee.Running||_===ee.Ended)&&U===$.Output,children:Object(r.jsx)("div",{className:"jsx-1556485210 console-wrap",children:q?Object(r.jsx)(at,{messages:H,clearConsole:function(){return g([])},setPromptValue:j,onEval:function(e){q&&R!==Ye.b.STOPPING&&R===Ye.b.IDLE&&q.replbox.evalCode(e)},promptState:R!==Ye.b.IDLE?"input":"prompt",checkLineEnd:function(e,t){Object(ot.checkLineEnd)(n.lang.id,e,t)},promptValue:b,loading:R===Ye.b.OFFLINE}):Object(r.jsx)(it.a,{messages:H})})}),Object(r.jsx)(Ge,{show:U===$.Code&&Boolean(q),children:q?Object(r.jsx)(W,{language:n.language,fs:q.fs,activeFilePath:F,onActiveFilePathChange:T}):null})]}),Object(r.jsx)(l.a,{id:"1556485210",children:[".console-wrap.jsx-1556485210{width:100%;height:100%;background-color:var(--color-brand-dark-blue);border-radius:var(--border-radius-1);}"]})]})}var st=D()((function(){return Promise.all([n.e(40),n.e(44)]).then(n.bind(null,"yR2o"))}),{loadableGenerated:{webpack:function(){return["yR2o"]},modules:["../../workspace/plugins/console/Console"]}});function lt(e){var t=e.initialViewMode,n=e.repl,c=e.currentUser,s=e.onUnrecoverableError,p=i.useState(""),b=Object(o.a)(p,2),j=b[0],f=b[1],x=i.useState(n.lang.header?[{data:"".concat(n.lang.header,"\n"),type:""}]:[]),m=Object(o.a)(x,2),g=m[0],h=m[1],v=i.useRef(!1),O=i.useRef(!1),y=i.useState(ee.Stopped),w=Object(o.a)(y,2),k=w[0],_=w[1],C=i.useState(Ye.b.OFFLINE),E=Object(o.a)(C,2),S=E[0],R=E[1],N=i.useState(t||$.Output),P=Object(o.a)(N,2),I=P[0],U=P[1],D=i.useState(void 0),L=Object(o.a)(D,2),z=L[0],F=L[1],T=i.useState(null),M=Object(o.a)(T,2),V=M[0],q=M[1],A=i.useState(null),B=Object(o.a)(A,2),G=B[0],K=B[1];i.useEffect((function(){if(V&&S===Ye.b.IDLE)return v.current?(O.current=!0,void(v.current=!1)):void(O.current&&_((function(e){return e===ee.Stopped?ee.Stopped:ee.Ended})))}),[V,S]),i.useEffect((function(){if(V&&G&&k===ee.Running){if(V.container.getConnectionState()===d.a.CONNECTED){var e=!1;return Object(et.a)({fs:V.fs,language:n.lang.id}).then((function(t){!e&&G&&G.send({eval:t})})),function(){e=!0}}v.current=!0}}),[V,G,k,n.lang.id]),i.useEffect((function(){k===ee.Stopped&&S===Ye.b.RUNNING&&(R(Ye.b.IDLE),h([]))}),[V,S,k,n.lang.id]),i.useEffect((function(){if(!V&&(k===ee.Running||I===$.Code)){var e=Object(d.b)({onUnrecoverableError:s}),t=Object(u.a)({container:e});q({container:e,fs:t})}}),[n,k,I,V,s]),i.useEffect((function(){if(V){V.container.connect({repl:n,currentUser:c});var e=V.container.openChannel({service:"eval",name:"evaler"},(function(e){e.channel&&K(e.channel)}));return function(){e(),V.container.destroy()}}}),[V,n,c]);var H=function(e){return h((function(t){return[].concat(Object(rt.a)(t),[e])}))};i.useEffect((function(){if(G)return G.onCommand((function(e){switch(e.body){case"output":return void H({data:e.output,type:""});case"error":return H({data:e.error,type:"error"}),void R(Ye.b.IDLE);case"result":return H({data:e.result,type:"result"}),void R(Ye.b.IDLE);case"eval":return void R(Ye.b.RUNNING);case"hint":if(!e.hint||!e.hint.text)return;return void H({data:"\x1b[0m\x1b[33m".concat(e.hint.text,"\x1b[0m\r\n"),type:""});case"input":return void H({data:e.output,type:""});default:a.c(new Error("Unknown eval command ".concat(e.body,". Expected output, error, state or result")))}}))}),[G]);var X=Boolean(c);return Object(r.jsxs)(Ae,{children:[Object(r.jsxs)(Ve,{repl:n,viewMode:I,onViewModeChange:U,isLoggedIn:X,children:[I===$.Output?Object(r.jsx)(We,{outputState:k,onClick:function(){if(k===ee.Stopped||k===ee.Ended)return _(ee.Running),void Object(oe.track)(oe.events.RUN_BUTTON_CLICKED,{context:"replView",type:"consoleOutput"});k===ee.Running&&(Object(oe.track)(oe.events.RUN_BUTTON_CLICKED,{context:"replView",type:"consoleOutput",stopping:!0}),_(ee.Stopped))}}):null,I===$.Code&&V?Object(r.jsx)(Z,{language:n.language,fs:V.fs,container:V.container,onActiveFilePathChange:F,activeFilePath:z}):null]}),Object(r.jsxs)(Be,{children:[k===ee.Stopped&&I===$.Output?Object(r.jsx)(fe,{isLoggedIn:X,repl:n,onClick:function(){_(ee.Running)}}):null,Object(r.jsx)(Ge,{show:(k===ee.Running||k===ee.Ended)&&I===$.Output,children:Object(r.jsx)("div",{className:"jsx-1556485210 console-wrap",children:V?Object(r.jsx)(st,{messages:g,clearConsole:function(){return h([])},setPromptValue:f,onEval:function(e){G&&S===Ye.b.IDLE&&G.send({eval:e})},promptState:S!==Ye.b.IDLE?"input":"prompt",checkLineEnd:function(e,t){Object(ot.checkLineEnd)(n.lang.id,e,t)},promptValue:j,loading:S===Ye.b.OFFLINE}):Object(r.jsx)(it.a,{messages:g})})}),Object(r.jsx)(Ge,{show:I===$.Code&&Boolean(V),children:V?Object(r.jsx)(W,{language:n.language,fs:V.fs,activeFilePath:z,onActiveFilePathChange:F}):null})]}),Object(r.jsx)(l.a,{id:"1556485210",children:[".console-wrap.jsx-1556485210{width:100%;height:100%;background-color:var(--color-brand-dark-blue);border-radius:var(--border-radius-1);}"]})]})}function dt(e){var t=e.repl,n=e.currentUser,s=e.initialViewMode,l=i.useState(""),d=Object(o.a)(l,2),u=d[0],p=d[1],b=i.useCallback((function(e){a.m((function(t){t.setTag("bsod","true"),t.setTag("replviewer","true"),console.error(e);var n=a.c(e);p(n)}))}),[]),j=function(e){return e.config.isServer?te.Webview:e.config.isVnc||e.lang.canUseShellRunner?te.Terminal:"replbox"===e.lang.engine?["basic","python_turtle","html","kaboom"].includes(e.lang.id)?te.ReplboxWebview:te.ReplboxConsole:"goval"===e.lang.engine?te.GovalConsole:null}(t);return i.useEffect((function(){Object(oe.track)(oe.events.REPL_VIEWER_RENDERED,{outputType:j,language:t.language,isVnc:t.config.isVnc,isServer:t.config.isServer})}),[j,t]),u?Object(r.jsx)(c.a,{user:n?{email:n.email,username:n.username}:void 0,sentryEventId:u,devHide:function(){return p("")}}):j===te.Webview?Object(r.jsx)(Ke,{initialViewMode:s,repl:t,currentUser:n,onUnrecoverableError:b}):j===te.Terminal?Object(r.jsx)(Ze,{initialViewMode:s,repl:t,currentUser:n,onUnrecoverableError:b}):j===te.ReplboxWebview?Object(r.jsx)(nt,{initialViewMode:s,repl:t,currentUser:n,onUnrecoverableError:b}):j===te.ReplboxConsole?Object(r.jsx)(ct,{initialViewMode:s,repl:t,currentUser:n,onUnrecoverableError:b}):j===te.GovalConsole?Object(r.jsx)(lt,{initialViewMode:s,repl:t,currentUser:n,onUnrecoverableError:b}):null}},"UKf+":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("cpVT"),o=n("nKUr"),i=(n("q1tI"),n("pDQI"));function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e){return Object(o.jsxs)(i.a,c(c({},e),{},{children:[Object(o.jsx)("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),Object(o.jsx)("path",{d:"M12 7V12.3333L16 15",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}))}},ceSv:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("nKUr"),o=n("cpVT"),i=n("xvhg"),a=n("dhJC"),c=n("q1tI"),s=n("up5I"),l=n("tidx"),d=n("TeFj"),u=n("8Vt8"),p=n("sMwv");function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e){var t=e.replId,n=e.onFork,o=e.isLoggedIn,b=e.onAuthCancel,f=e.trackingContext,x=Object(a.a)(e,["replId","onFork","isLoggedIn","onAuthCancel","trackingContext"]),m=c.useState(!1),g=Object(i.a)(m,2),h=g[0],v=g[1];c.useEffect((function(){!h&&b&&b()}),[h,b]);var O=Object(p.a)({onFork:n}),y=Object(i.a)(O,2),w=y[0],k=y[1].loading;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(s.a,j(j({},x),{},{Icon:d.a,disabled:k,onClick:function(e){x.onClick&&x.onClick(e),o?k||w(t,{trackingData:{context:f}}):v(!0)},children:k?"Forking...":"Fork"})),o?null:Object(r.jsx)(u.a,{isOpen:h,onRequestClose:function(){v(!1)},children:Object(r.jsx)(l.a,{title:"Sign up or log in to fork this repl",onSuccess:function(e){e&&w(t,{trackingData:{context:f,authType:o?"login":"signup"}})}})})]})}},jmGw:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("nKUr"),o=n("H+61"),i=n("UlJF"),a=n("+Css"),c=n("7LId"),s=n("VIvw"),l=n("iHvq"),d=n("cpVT"),u=n("MX0m"),p=n.n(u),b=n("q1tI"),j=n("FIf5"),f=n.n(j);function x(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var m=function(e){Object(c.a)(n,e);var t=x(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return e=t.call.apply(t,[this].concat(i)),Object(d.a)(Object(a.a)(e),"codeEl",void 0),Object(d.a)(Object(a.a)(e),"setRef",(function(t){return e.codeEl=t})),Object(d.a)(Object(a.a)(e),"highlightCode",(function(){e.codeEl&&f.a.highlightBlock(e.codeEl)})),e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.highlightCode()}},{key:"componentDidUpdate",value:function(){this.highlightCode()}},{key:"render",value:function(){return Object(r.jsxs)("pre",{className:"jsx-2661271750",children:[Object(r.jsx)("code",{ref:this.setRef,className:"jsx-2661271750 "+"language-".concat(this.props.language),children:this.props.value}),Object(r.jsx)(p.a,{id:"2661271750",children:["code.jsx-2661271750 .hljs-keyword,.hljs-selector-tag,.hljs-built_in,.hljs-name,.hljs-tag{color:var(--color-primary-1);}","code.jsx-2661271750 .hljs-string,.hljs-title,.hljs-section,.hljs-attribute,.hljs-literal,.hljs-template-tag,.hljs-template-variable,.hljs-type,.hljs-addition{color:var(--color-red-2);}","code.jsx-2661271750 .hljs-comment,.hljs-quote,.hljs-variable{color:var(--color-green-2);}","code.jsx-2661271750 .hljs-attr{color:var(--color-red-1);}"]})]})}}]),n}(b.PureComponent);Object(d.a)(m,"defaultProps",{language:""})},mfmY:function(e,t){var n=Object.prototype.toString,r=Array.isArray;e.exports=function(e){return"string"==typeof e||!r(e)&&function(e){return!!e&&"object"==typeof e}(e)&&"[object String]"==n.call(e)}},"o/6W":function(e,t,n){"use strict";n.r(t);var r=n("vJKn"),o=n.n(r),i=n("rg98"),a=n("nKUr"),c=n("cpVT"),s=n("xvhg"),l=n("MX0m"),d=n.n(l),u=n("q1tI"),p=n("RVZx"),b=n("3gM7"),j=n("tZOq"),f=n("20a2"),x=n("Mjqs"),m=n("xom/"),g=n("YFqc"),h=n.n(g),v=n("W27C"),O=n("T0nv"),y=n("Gbtx");function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e){var t=e.repl,n=t.title,r=t.owner;return r?Object(a.jsxs)("div",{className:"jsx-2470659356 fork-card",children:[Object(a.jsx)(h.a,k(k({},Object(O.b)(t)),{},{children:Object(a.jsx)("a",{className:"jsx-2470659356 link-blanket"})})),Object(a.jsxs)("div",{className:"jsx-2470659356 content",children:[Object(a.jsx)("div",{className:"jsx-2470659356 repl-title",children:n}),Object(a.jsxs)(m.a,{wrap:"nowrap",align:"center",spacing:"2px",children:[Object(a.jsx)(h.a,k(k({},Object(v.c)(r)),{},{children:Object(a.jsx)("a",{onClick:function(e){return e.stopPropagation()},className:"jsx-2470659356",children:Object(a.jsx)(y.a,{size:"s",url:r.image})})})),Object(a.jsx)(h.a,k(k({},Object(v.c)(r)),{},{children:Object(a.jsx)("a",{onClick:function(e){return e.stopPropagation()},className:"jsx-2470659356 username",children:r.username})}))]})]}),Object(a.jsx)(d.a,{id:"2470659356",children:[".fork-card.jsx-2470659356{position:relative;padding:var(--spacing-1);border-radius:var(--border-radius-2);border:1px solid var(--color-border);background-color:var(--color-background-1);pointer-events:none;}",".content.jsx-2470659356{position:relative;}",".fork-card.jsx-2470659356 a.jsx-2470659356{pointer-events:all;}",".link-blanket.jsx-2470659356{position:absolute;top:0;left:0;width:100%;height:100%;}",".repl-title.jsx-2470659356{color:var(--color-primary-1);font-size:var(--font-size-desktop-text-medium);font-weight:bold;padding-bottom:var(--spacing-half);}",".repl-title.jsx-2470659356,.username.jsx-2470659356{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}",".repl-title.jsx-2470659356{font-weight:var(--font-weight-medium);}","a.jsx-2470659356:hover{-webkit-text-decoration:none;text-decoration:none;}",".username.jsx-2470659356{font-size:var(--font-size-desktop-text-small);color:var(--color-foreground-2);}","a.username.jsx-2470659356:hover{color:var(--color-foreground-1);}"]})]}):null}var C=n("ceSv"),E=n("SXYe"),S=n("IdsG"),R=n("OYKG"),N=n("0LUh");function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e){var t=e.user;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(h.a,I(I({},Object(v.c)(t)),{},{children:Object(a.jsx)("a",{className:"jsx-999150579 username",children:t.username})})),Object(a.jsx)(d.a,{id:"999150579",children:["a.jsx-999150579{color:var(--color-primary-1);font-size:var(--font-size-desktop-text-medium);font-weight:var(--font-weight-medium);padding:1px 2px;-webkit-text-decoration:none !important;text-decoration:none !important;}"]})]})}var D=function(e){var t=e.children;return Object(a.jsxs)("div",{className:"jsx-580368413",children:[t,Object(a.jsx)(d.a,{id:"580368413",children:["div.jsx-580368413{color:var(--color-foreground-3);font-size:var(--font-size-desktop-text-medium);}"]})]})};function L(e){var t=e.repl;return t.owner?1===t.permissions.length&&t.permissions[0].user?Object(a.jsxs)(D,{children:[Object(a.jsx)(U,{user:t.owner})," + ",Object(a.jsx)(U,{user:t.permissions[0].user})]}):2===t.permissions.length&&t.permissions[0].user&&t.permissions[1].user?Object(a.jsxs)(D,{children:[Object(a.jsx)(U,{user:t.owner}),",",Object(a.jsx)(U,{user:t.permissions[0].user}),", +",Object(a.jsx)(U,{user:t.permissions[1].user})]}):t.permissions.length>2&&t.permissions[0].user&&t.permissions[1].user?Object(a.jsxs)(D,{children:[Object(a.jsx)(U,{user:t.owner}),",",Object(a.jsx)(U,{user:t.permissions[0].user}),"+ ",t.permissions.length-1," others"]}):Object(a.jsx)(U,{user:t.owner}):null}function z(e){var t,n=e.repl,r=e.isLoggedIn;return Object(a.jsxs)("header",{className:d.a.dynamic([["254135593",[E.a.mobileMax]]]),children:[Object(a.jsx)("h1",{className:d.a.dynamic([["254135593",[E.a.mobileMax]]])+" heading",children:n.title}),Object(a.jsxs)(m.a,{wrap:"nowrap",align:"center",justify:"space-between",children:[Object(a.jsxs)(m.a,{spacing:"4px",align:"center",children:[n.owner?Object(a.jsx)(h.a,I(I({},Object(v.c)(n.owner)),{},{children:Object(a.jsx)("a",{className:d.a.dynamic([["254135593",[E.a.mobileMax]]]),children:Object(a.jsx)(y.a,{style:{height:"32px",width:"32px"},url:null===(t=n.owner)||void 0===t?void 0:t.image})})})):null,n.permissions.length>0?n.permissions.slice(0,2).map((function(e){var t=e.id,n=e.user;return n?Object(a.jsx)(h.a,I(I({},Object(v.c)(n)),{},{children:Object(a.jsx)("a",{className:d.a.dynamic([["254135593",[E.a.mobileMax]]]),children:Object(a.jsx)(y.a,{style:{height:"32px",width:"32px"},url:n.image},t)})})):null})):null,n.owner?Object(a.jsxs)("div",{className:d.a.dynamic([["254135593",[E.a.mobileMax]]])+" contributor-links-wrapper",children:[Object(a.jsx)("div",{className:d.a.dynamic([["254135593",[E.a.mobileMax]]])+" desktop",children:Object(a.jsx)(L,{repl:n})}),Object(a.jsx)("div",{className:d.a.dynamic([["254135593",[E.a.mobileMax]]])+" mobile",children:Object(a.jsx)(D,{children:n.permissions.length>0?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(U,{user:n.owner})," +"," ",n.permissions.length," ",n.permissions.length>1?"others":"other"]}):Object(a.jsx)(U,{user:n.owner})})})]}):null]}),n.currentUserPermissions.containerWrite?null:Object(a.jsx)(C.a,{isLoggedIn:r,replId:n.id,color:"primary",filled:!0,trackingContext:"replViewHeader",onFork:function(){window.__SOCIAL_VIEW_FORK=!0}}),n.flagExplore&&n.currentUserPermissions.publish?Object(a.jsxs)(m.b,{align:"end",spacing:"2px",children:[Object(a.jsxs)(m.a,{align:"center",justify:"end",spacing:1,wrap:"nowrap",children:[Object(a.jsxs)(R.b,{Icon:n.lastPublishedAt?N.a:void 0,replId:n.id,color:n.lastPublishedAt?void 0:"primary",children:["Publish ",n.lastPublishedAt?" update":"to Explore"]}),n.lastPublishedAt?Object(a.jsx)(R.a,{replId:n.id}):null]}),n.lastPublishedAt?Object(a.jsxs)(S.a,{foreground:2,size:"small",children:["Last publish"," ",new Date(n.lastPublishedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]}):null]}):null]}),Object(a.jsx)(d.a,{id:"254135593",dynamic:[E.a.mobileMax],children:[".heading.__jsx-style-dynamic-selector{max-width:75%;word-wrap:break-word;font-size:var(--font-size-desktop-heading-1);font-weight:var(--font-weight-bold);padding-bottom:var(--spacing-half);}",".contributor-links-wrapper.__jsx-style-dynamic-selector{color:var(--color-foreground-3);}",".contributor-links-wrapper.__jsx-style-dynamic-selector a.__jsx-style-dynamic-selector{color:var(--color-primary-1);}",".contributor-links-wrapper.__jsx-style-dynamic-selector .desktop.__jsx-style-dynamic-selector{display:none;}",".contributor-links-wrapper.__jsx-style-dynamic-selector .mobile.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}","@media screen and (min-width:".concat(E.a.mobileMax,"px){.detail-menu.__jsx-style-dynamic-selector{display:none;}.contributor-links-wrapper.__jsx-style-dynamic-selector .desktop.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.contributor-links-wrapper.__jsx-style-dynamic-selector .mobile.__jsx-style-dynamic-selector{display:none;}}")]})]})}var F=n("z7pX"),T=n("up5I");function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e){var t=e.replId,n=Object(j.qe)({variables:{replId:t,count:100}}),r=n.data,o=n.fetchMore,i=n.loading,c="Repl"===(null===r||void 0===r?void 0:r.repl.__typename)?r.repl:null,s=c?c.publicForks:null,l=c?c.publicForkCount:null;return Object(a.jsxs)("div",{className:d.a.dynamic([["566255382",[E.a.mobileMax]]])+" repl-forks",children:[Object(a.jsx)("div",{className:d.a.dynamic([["566255382",[E.a.mobileMax]]])+" heading",children:Object(a.jsxs)(m.a,{spacing:"4px",children:[null!==l?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(S.a,{fontWeight:"medium",size:"medium",children:l}),Object(a.jsx)(S.a,{foreground:2,size:"medium",children:1!==l?"forks":"fork"})]}):null,i?Object(a.jsx)(S.a,{foreground:3,fontWeight:"medium",size:"medium",children:"Loading forks..."}):null]})}),Object(a.jsxs)("div",{className:d.a.dynamic([["566255382",[E.a.mobileMax]]]),children:[Object(a.jsx)("div",{className:d.a.dynamic([["566255382",[E.a.mobileMax]]])+" forks-list",children:s?s.items.map((function(e){return Object(a.jsx)("div",{className:d.a.dynamic([["566255382",[E.a.mobileMax]]])+" fork-card",children:Object(a.jsx)(_,{repl:e})},e.id)})):null}),Object(a.jsx)("div",{className:d.a.dynamic([["566255382",[E.a.mobileMax]]]),children:null!==s&&void 0!==s&&s.pageInfo.nextCursor?Object(a.jsx)(T.a,{disabled:i,border:!1,color:"primary",filled:!1,fullWidth:!0,onClick:function(){i||o({variables:{after:s.pageInfo.nextCursor},updateQuery:function(e,t){if(!t||!t.fetchMoreResult)return e;var n="Repl"===e.repl.__typename?e.repl:null;if(!n)return e;var r=t.fetchMoreResult,o="Repl"===r.repl.__typename?r.repl:null;return o?V(V({},r),{},{repl:V(V({},o),{},{publicForks:V(V({},o.publicForks),{},{items:[].concat(Object(F.a)(n.publicForks.items),Object(F.a)(o.publicForks.items))})})}):e}})},children:i?"Loading...":"Load more"}):null})]}),Object(a.jsx)(d.a,{id:"566255382",dynamic:[E.a.mobileMax],children:[".repl-forks.__jsx-style-dynamic-selector{padding:var(--spacing-2);overflow-y:auto;height:500px;}",".heading.__jsx-style-dynamic-selector{padding:var(--spacing-1) 0;}",".forks-list.__jsx-style-dynamic-selector{display:grid;grid-template-columns:repeat(1,minmax(0,1fr));gap:var(--spacing-2);padding-bottom:var(--spacing-2);}","@media screen and (min-width:".concat(E.a.mobileMax,"px){.forks-list.__jsx-style-dynamic-selector{grid-template-columns:repeat(2,minmax(0,1fr));}}")]})]})}var q=n("TSYQ"),A=n.n(q),B=n("YGlK"),G=n("Gaen");function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var X=Object.values(j.G),Y=X.length,J={heart:"\u2764\ufe0f",rocket:"\ud83d\ude80 ",eyes:"\ud83d\udc40 ",fire:"\ud83d\udd25",open_mouth:"\ud83d\ude2e"};function Q(e){var t=e.count,n=e.selected,r=e.type,o=e.onClick,i=e.disabled;return Object(a.jsxs)("button",{disabled:i,onClick:o,className:"jsx-2820671949 "+(A()({selected:n,enabled:!i})||""),children:[Object(a.jsx)("span",{className:"jsx-2820671949 icon",children:J[r]}),Object(a.jsx)("span",{className:"jsx-2820671949 count",children:t}),Object(a.jsx)(d.a,{id:"2820671949",children:["button.jsx-2820671949{background-color:transparent;padding:2px var(--spacing-1);height:30px;border:1px solid var(--color-control-1);border-radius:30px;color:var(--color-foreground-2);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:var(--font-size-desktop-text-small);-webkit-transition:background-color 200ms;transition:background-color 200ms;}","button.enabled.jsx-2820671949{cursor:pointer;}","button.enabled.jsx-2820671949:hover{background-color:var(--color-background-3);}","button.enabled.selected.jsx-2820671949:hover,button.enabled.selected.jsx-2820671949{color:var(--color-primary-1);border-color:var(--color-primary-1);background-color:var(--color-primary-transparent-3);}",".icon.jsx-2820671949{margin-right:var(--spacing-1);}",".count.jsx-2820671949{font-family:var(--font-family-sans-serif);font-weight:var(--font-weight-bold);}","button.enabled.jsx-2820671949:focus{outline:0 none;border-color:var(--color-primary-transparent-1);}"]})]})}function Z(e){var t=e.options,n=e.onAdd,r=u.useState(!1),o=Object(s.a)(r,2),i=o[0],c=o[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(B.a,{isOpen:i,positions:["bottom"],align:"center",onClickOutside:function(){return c(!1)},children:[Object(a.jsx)("button",{onClick:function(){return c(!i)},className:"jsx-2435484554 add-control",children:Object(a.jsx)(G.a,{})}),Object(a.jsx)("div",{className:"jsx-2435484554 options",children:Object(a.jsx)(m.a,{children:t.map((function(e){return Object(a.jsx)("button",{onClick:function(){n(e),c(!1)},className:"jsx-2435484554 icon-button",children:Object(a.jsx)("span",{className:"jsx-2435484554",children:J[e]})},e)}))})})]}),Object(a.jsx)(d.a,{id:"2435484554",children:["button.jsx-2435484554{cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;background-color:transparent;-webkit-transition:background-color 200ms;transition:background-color 200ms;}",".add-control.jsx-2435484554{height:30px;width:30px;border-radius:50%;color:var(--color-foreground-2);border:1px solid var(--color-control-1);}",".options.jsx-2435484554{padding:2px;}",".icon-button.jsx-2435484554{padding:var(--spacing-half) var(--spacing-1);border:0 none;border-radius:var(--border-radius-1);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:var(--font-size-desktop-text-small);cursor:pointer;text-align:center;}",".icon-button.jsx-2435484554 span.jsx-2435484554{padding-right:var(--spacing-half);}","button.jsx-2435484554:hover,button.jsx-2435484554:active{outline:0 none;background-color:var(--color-control-1);}","button.jsx-2435484554:focus{outline:0 none;border-color:var(--color-control-2);}"]})]})}function $(e,t){return"heart"===e.type?-1:"heart"===t.type||e.type>t.type?1:-1}function ee(e){var t=e.repl,n=e.currentUser,r=Object(j.ue)(),o=Object(s.a)(r,2),i=o[0],c=o[1].loading,l=t.reactions.reduce((function(e,t){return e+t.count}),0),d=Boolean(null===n||void 0===n?void 0:n.isVerified)&&t.reactions.length<Y,u=t.reactions.length?t.reactions:[{id:"heart",type:j.G.Heart,count:0,currentUserReacted:!1}],p=X.filter((function(e){return!t.reactions.find((function(t){return t.type===e}))}));return Object(a.jsxs)(m.b,{spacing:1,children:[Object(a.jsx)("div",{children:0===l?Object(a.jsx)(S.a,{foreground:2,children:"No reactions yet"}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(S.a,{foreground:1,fontWeight:"medium",size:"medium",children:l})," ",Object(a.jsxs)(S.a,{foreground:2,children:["Reaction",1===l?"":"s"]})]})}),Object(a.jsx)("div",{children:Object(a.jsxs)(m.a,{align:"center",spacing:1,children:[u.map((function(e){return Object(a.jsx)(Q,{disabled:!n||!n.isVerified,count:e.count,selected:e.currentUserReacted,type:e.type,onClick:function(){if(!c){var n={setReplReaction:H(H({},t),{},{reactions:t.reactions.reduce((function(t,n){var r=H({},n);return r.type===e.type&&(r.currentUserReacted=!e.currentUserReacted,r.count+=e.currentUserReacted?-1:1),r.count&&t.push(r),t}),[]).sort($)})};i({variables:{input:{replId:t.id,reactionType:e.type,react:!e.currentUserReacted}},optimisticResponse:n})}}},e.type)})),d?Object(a.jsx)(Z,{options:p,onAdd:function(e){if(!c){var n={setReplReaction:H(H({},t),{},{reactions:t.reactions.reduce((function(t,n){var r=H({},n);return r.type===e&&(r.count+=1,r.currentUserReacted=!0),t.push(r),t}),[]).sort($)})};i({variables:{input:{replId:t.id,reactionType:e,react:!0}},optimisticResponse:n})}}}):null]})})]})}var te=n("oOwn"),ne=n.n(te),re=n("Altv"),oe=n("M85P"),ie=n("DqZZ");function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function se(e){var t=e.initialValue,n=e.onSubmit,r=e.onCancel,c=e.isLoading,l=e.autoFocus,p=e.ctaText,b=e.placeholder,j=e.userSearch,f=u.useState(t||""),x=Object(s.a)(f,2),g=x[0],h=x[1],v=u.useState(!1),O=Object(s.a)(v,2),w=O[0],k=O[1],_=u.useRef(null),C=Object(ie.a)().ref,E=!g||c;u.useEffect((function(){if(l&&t&&_.current){var e=t.length;_.current.setSelectionRange(e,e)}}),[t,l]);var S=Object(re.a)({"@":function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j({query:t||"",limit:5});case 2:return n=e.sent,e.abrupt("return",n.map((function(e){return{icon:Object(a.jsx)(y.a,{url:e.image}),value:e.username}})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),R=Object(s.a)(S,2),N=R[0].suggestions,P=R[1],I=u.useMemo((function(){var e=_.current;if(N&&e)return ne()(e,N.textTrigger.index)}),[N]),U=Object(oe.c)({items:(null===N||void 0===N?void 0:N.results)||[],defaultHighlightedIndex:0,isOpen:Boolean(N),onSelectedItemChange:function(e){var t=e.selectedItem;if(N&&t){var n=N.applySuggestion({targetValue:g,suggestionValue:t.value}),r=n.fullValue,o=n.cursorIndex;h(r),setTimeout((function(){_.current&&_.current.setSelectionRange(o,o)}))}}}),D=U.highlightedIndex,L=U.getInputProps,z=U.getMenuProps,F=U.getItemProps,M=U.isOpen;return Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n(g),h("")},className:"jsx-".concat(le.__hash)+" jsx-2034923493 "+d.a.dynamic([["3642784194",[I?"visibile":"hidden",I?I.top+I.height:0,I?I.left:0]]]),children:[Object(a.jsxs)(m.b,{spacing:1,align:"stretch",justify:"end",children:[Object(a.jsxs)("div",{className:"jsx-".concat(le.__hash)+" jsx-2034923493 "+d.a.dynamic([["3642784194",[I?"visibile":"hidden",I?I.top+I.height:0,I?I.left:0]]])+" textarea-container",children:[Object(a.jsx)("textarea",ce(ce({},L({autoFocus:l,placeholder:b,ref:function(e){P(e),C(e),_.current=e},onFocus:function(){return k(!0)},onBlur:function(){k(!1),g||r()},onChange:function(e){return h(e.currentTarget.value)},value:g,onKeyDown:function(e){M||(e.nativeEvent.preventDownshiftDefault=!0),"Enter"===e.key&&e.metaKey&&(n(g),e.currentTarget.blur(),h(""))}})),{},{className:"jsx-".concat(le.__hash)+" jsx-2034923493 "+d.a.dynamic([["3642784194",[I?"visibile":"hidden",I?I.top+I.height:0,I?I.left:0]]])})),null!==N&&void 0!==N&&N.results&&N.results.length?Object(a.jsx)("ul",ce(ce({},z()),{},{className:"jsx-".concat(le.__hash)+" jsx-2034923493 "+d.a.dynamic([["3642784194",[I?"visibile":"hidden",I?I.top+I.height:0,I?I.left:0]]]),children:N.results.map((function(e,t){return Object(a.jsx)("li",ce(ce({},F({item:e,index:t,key:e.value})),{},{className:"jsx-".concat(le.__hash)+" jsx-2034923493 "+d.a.dynamic([["3642784194",[I?"visibile":"hidden",I?I.top+I.height:0,I?I.left:0]]])+" "+((D===t?"highlighted":void 0)||""),children:e.value}))}))})):null]}),w||g?Object(a.jsxs)(m.a,{justify:"end",spacing:"4px",children:[Object(a.jsx)(T.a,{filled:!1,border:!1,onClick:function(){h(""),r()},children:"Cancel"}),Object(a.jsx)(T.a,{filled:!0,disabled:E,color:"primary",type:"submit",children:p||"Comment"})]}):null]}),Object(a.jsx)(d.a,{id:le.__hash,children:le}),Object(a.jsx)(d.a,{id:"2034923493",children:[".textarea-container.jsx-2034923493{font-size:var(--font-size-desktop-text-small);position:relative;}","ul.jsx-2034923493{position:absolute;margin:0;padding:var(--spacing-half) 0;background-color:var(--dropdown-background-color);border:1px solid var(--dropdown-border-color);list-style:none;border-radius:var(--border-radius-1);overflow:hidden;}","ul.jsx-2034923493:focus{box-shadow:0 0 2.5px var(--dropdown-border-color) inset;}","li.jsx-2034923493{padding:var(--spacing-half);}",".highlighted.jsx-2034923493{background-color:var(--color-primary-1);color:var(--color-white);}"]}),Object(a.jsx)(d.a,{id:"3642784194",dynamic:[I?"visibile":"hidden",I?I.top+I.height:0,I?I.left:0],children:["ul.__jsx-style-dynamic-selector{visibility:".concat(I?"visibile":"hidden",";top:").concat(I?I.top+I.height:0,"px;left:calc( ").concat(I?I.left:0,"px - var(--spacing-half) );}")]})]})}var le=["textarea.jsx-538941221{font-size:var(--font-size-desktop-text-small);font-family:var(--font-family-sans-serif);background-color:var(--color-background-3);padding:12px;display:block;min-height:60px;max-height:240px;overflow-y:scroll;width:100%;border-radius:var(--border-radius-2);border:1px solid var(--color-border);line-height:1.2em;resize:vertical;-webkit-transition:0.1s box-shadow,0.2s background-color,0.2s border-color;transition:0.1s box-shadow,0.2s background-color,0.2s border-color;}",".jsx-538941221::-webkit-input-placeholder{color:var(--color-foreground-2);}",".jsx-538941221::-moz-placeholder{color:var(--color-foreground-2);}",".jsx-538941221:-ms-input-placeholder{color:var(--color-foreground-2);}",".jsx-538941221::placeholder{color:var(--color-foreground-2);}","textarea.jsx-538941221:hover{border-color:var(--color-primary-transparent-1);}","textarea.jsx-538941221:focus,textarea.jsx-538941221:active{outline:none;border-color:var(--color-primary-transparent-1);}","textarea.jsx-538941221:focus{background-color:var(--color-background-1);color:var(--color-foreground-1);border-radius:var(--border-radius-1);box-shadow:0px 8px 12px rgba(0,0,0,0.075);}"];le.__hash="538941221";var de=n("VoYB");function ue(e){var t=Object(de.a)().showError,n=Object(j.ne)({onCompleted:function(n){"UserError"===n.createReplComment.__typename?t(n.createReplComment.message):"ReplComment"===n.createReplComment.__typename&&e.onCreate(n.createReplComment)},onError:function(e){return t(e.message)}}),r=Object(s.a)(n,2),o=r[0],i=r[1];return Object(a.jsx)(se,{userSearch:e.userSearch,placeholder:e.placeholder,autoFocus:e.autoFocus,initialValue:e.initialValue,isLoading:i.loading,onCancel:e.onCancel,onSubmit:function(t){i.loading||o({variables:{input:{replId:e.replId,body:t}}})}})}function pe(e){var t=Object(de.a)().showError,n=Object(j.oe)({onCompleted:function(n){"UserError"===n.createReplCommentReply.__typename?t(n.createReplCommentReply.message):"ReplComment"===n.createReplCommentReply.__typename&&e.onCreate(n.createReplCommentReply)},onError:function(e){return t(e.message)}}),r=Object(s.a)(n,2),o=r[0],i=r[1];return Object(a.jsx)(se,{userSearch:e.userSearch,placeholder:e.placeholder,autoFocus:e.autoFocus,initialValue:e.initialValue,isLoading:i.loading,onCancel:e.onCancel,onSubmit:function(t){i.loading||o({variables:{input:{replCommentId:e.replCommentId,body:t}}})}})}var be=n("lHiQ"),je=n("QPY3"),fe=n("8Vt8"),xe=n("6wo1"),me=n("+Jnw"),ge=n("2lQ7"),he=n.n(ge),ve=n("XmHG"),Oe=n("jmGw"),ye=n("AERv"),we=n("OXcl"),ke=n("nXXz"),_e=n("VX74"),Ce=n("tidx");function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Re(e){var t=e.totalCount;return e.areCommentsEnabled?t&&t>0?Object(a.jsxs)(m.a,{spacing:"4px",children:[Object(a.jsx)(S.a,{foreground:1,fontWeight:"medium",size:"medium",children:t}),Object(a.jsx)(S.a,{foreground:2,size:"medium",children:1===t?"comment":"comments"})]}):Object(a.jsx)(S.a,{foreground:2,size:"medium",children:"No comments yet"}):Object(a.jsx)(S.a,{foreground:2,size:"medium",children:"Adding comments has been turned off for this repl."})}function Ne(e){var t,n,r=e.comment,o=e.onDelete,i=e.userSearch,c=e.onRepliesToggle,l=e.repliesExpanded,p=e.replyCount,b=e.replId,f=e.replyToId,x=e.onReply,g=e.linkedToCommentId,O=e.currentUser,w=e.parentAuthor,k=e.areCommentsEnabled,_=u.useState(!1),C=Object(s.a)(_,2),E=C[0],R=C[1],N=u.useState(!1),P=Object(s.a)(N,2),I=P[0],U=P[1],D=u.useState(null),L=Object(s.a)(D,2),z=L[0],F=L[1],M=u.useState(!1),V=Object(s.a)(M,2),W=V[0],q=V[1],B=r.user,G=r.timeCreated,K=Object(de.a)(),H=K.showConfirm,X=K.showError,Y=u.useRef(null),J=u.useRef(g),Q=[];null!==(t=r.currentUserPermissions)&&void 0!==t&&t.edit&&Q.push({label:"Edit"}),null!==(n=r.currentUserPermissions)&&void 0!==n&&n.delete&&Q.push({label:"Delete",isDestructive:!0}),u.useEffect((function(){if(J.current===r.id){var e=!1;return setTimeout((function(){if(!e&&Y.current){U(!0);var t=Y.current.getBoundingClientRect().top+window.scrollY-120;window.scroll({top:t,behavior:"smooth"})}})),function(){e=!0}}}),[r,U]);var Z=Object(j.me)({onCompleted:function(e){"UserError"===e.updateReplComment.__typename?X(e.updateReplComment.message):"ReplComment"===e.updateReplComment.__typename&&H("Comment updated")},onError:function(e){return X(e.message)}}),$=Object(s.a)(Z,2),ee=$[0],te=$[1];return W?Object(a.jsx)(se,{userSearch:i,placeholder:"Edit comment...",initialValue:r.body,onCancel:function(){return q(!1)},onSubmit:function(e){ee({variables:{input:{id:r.id,body:e}},optimisticResponse:{updateReplComment:Se(Se({__typename:"ReplComment"},r),{},{body:e})}}),q(!1)},autoFocus:!0,isLoading:te.loading}):Object(a.jsxs)("div",{ref:Y,className:"jsx-2586501345 "+(A()("comment-item",{"is-action-menu-open":E})||""),children:[I?Object(a.jsx)("div",{className:"jsx-2586501345 highlight"}):null,Object(a.jsxs)(m.a,{wrap:"nowrap",justify:"space-between",spacing:1,children:[B?Object(a.jsx)(h.a,Se(Se({},Object(v.c)(B)),{},{children:Object(a.jsx)("a",{className:"jsx-2586501345",children:Object(a.jsx)(y.a,{url:B.image,style:{width:"32px",height:"32px"}})})})):null,Object(a.jsxs)("div",{className:"jsx-2586501345 content",children:[Object(a.jsxs)(m.b,{spacing:"4px",align:"stretch",children:[Object(a.jsxs)(m.a,{wrap:"nowrap",align:"center",spacing:"4px",children:[B?Object(a.jsx)(h.a,Se(Se({},Object(v.c)(B)),{},{children:Object(a.jsx)("a",{className:"jsx-2586501345",children:B.username})})):null,Object(a.jsx)(S.a,{foreground:3,size:"xsmall",children:(new Date).getTime()-new Date(G).getTime()<1e3?"just now":Object(je.a)(G)})]}),Object(a.jsx)(me.a,{source:r.body,skipHtml:!0,unwrapDisallowed:!0,allowedTypes:["link","linkReference","text","code","inlineCode","strong","emphasis","paragraph","list"],renderers:{code:Oe.a,linkReference:ve.c,link:ve.d,list:ve.f},plugins:[ye.markdownMentionPlugin,he.a]})]}),W?null:Object(a.jsxs)("footer",{className:"jsx-2586501345",children:[null!==z&&O?Object(a.jsx)(pe,{userSearch:i,placeholder:z?"Reply to ".concat(z):"Reply",autoFocus:!0,replId:b,replCommentId:f,onCancel:function(){return F(null)},onCreate:function(){x(),F(null)},initialValue:z}):null,null===z?Object(a.jsx)("div",{className:"jsx-2586501345 footer-actions",children:Object(a.jsxs)(m.a,{spacing:"2px",children:[O&&k?Object(a.jsx)("div",{className:"jsx-2586501345",children:Object(a.jsx)(T.a,{size:"small",color:"primary",filled:!1,border:!1,onClick:function(){var e=r.user&&r.user.id!==O.id?[r.user.username]:[];null!==w&&void 0!==w&&w.username&&w.id!==O.id&&!e.includes(w.username)&&e.unshift(w.username),F(e.map((function(e){return"@".concat(e)})).join(" ")+" ")},children:"Reply"})}):null,p>0?Object(a.jsx)("div",{className:"jsx-2586501345 replies-toogle",children:Object(a.jsx)(T.a,{size:"small",border:!1,filled:!1,onClick:c,children:Object(a.jsxs)(m.a,{wrap:"nowrap",align:"center",spacing:"2px",children:[Object(a.jsxs)("div",{className:"jsx-2586501345",children:[l?"Hide":"View"," ",p," ",1===p?"reply":"replies"]}),Object(a.jsx)("div",{className:"jsx-2586501345 "+(A()("toggle-icon",{"replies-expanded":l})||""),children:Object(a.jsx)(ke.a,{size:"small"})})]})})}):null]})}):null]})]}),Q.length?Object(a.jsx)("div",{className:"jsx-2586501345 actions",children:Object(a.jsx)(we.a,{onOpenChange:R,items:Q,onItemClick:function(e){switch(e.label){case"Edit":return void q(!0);case"Delete":o(r.id)}}})}):null]}),Object(a.jsx)(d.a,{id:"2586501345",children:[".comment-item.jsx-2586501345{position:relative;}",".highlight.jsx-2586501345{--padding:var(--spacing-2);opacity:0;position:absolute;background-color:var(--color-primary-transparent-3);z-index:0;top:calc(var(--padding) / 2 * -1);left:calc(var(--padding) / 2 * -1);width:calc(100% + var(--padding));height:calc(100% + var(--padding));border-radius:var(--border-radius-2);pointer-events:none;-webkit-animation:fadeInOut-jsx-2586501345 2s ease-in 500ms forwards;animation:fadeInOut-jsx-2586501345 2s ease-in 500ms forwards;}","@-webkit-keyframes fadeInOut-jsx-2586501345{0%{opacity:0;}5%{opacity:1;}85%{opacity:1;}100%{opacity:0;}}","@keyframes fadeInOut-jsx-2586501345{0%{opacity:0;}5%{opacity:1;}85%{opacity:1;}100%{opacity:0;}}","a.jsx-2586501345{font-size:var(--font-size-desktop-text-small);color:var(--color-foreground-1);font-weight:var(--font-weight-medium);-webkit-text-decoration:none !important;text-decoration:none !important;-webkit-transition:color 0.2s;transition:color 0.2s;}","a.jsx-2586501345:hover{color:var(--color-primary-1);}",".actions.jsx-2586501345{position:relative;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;opacity:0;}",".comment-item.jsx-2586501345:focus-within .actions.jsx-2586501345,.comment-item.jsx-2586501345:hover .actions.jsx-2586501345,.is-action-menu-open.jsx-2586501345 .actions.jsx-2586501345,.is-touch-device .actions.jsx-2586501345{opacity:1;}",".content.jsx-2586501345{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;}",".comment-item.jsx-2586501345 .rendered-markdown{background:unset;font-size:var(--font-size-desktop-text-small);}",".comment-item.jsx-2586501345 .rendered-markdown pre{padding:var(--spacing-half) !important;}",".comment-item.jsx-2586501345 .rendered-markdown pre,.comment-item.jsx-2586501345 .rendered-markdown pre code{background-color:var(--color-background-1);}","footer.jsx-2586501345{position:relative;padding-top:var(--spacing-half);}",".replies-toogle.jsx-2586501345{opacity:0.7;}",".toggle-icon.jsx-2586501345{-webkit-transform:rotate(270deg);-ms-transform:rotate(270deg);transform:rotate(270deg);}",".toggle-icon.replies-expanded.jsx-2586501345{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}",".replies-toogle.jsx-2586501345:hover{opacity:1;}",".footer-actions.jsx-2586501345{position:relative;left:calc(var(--spacing-half) * -1);}"]})]})}function Pe(e){var t=e.comment,n=e.onDelete,r=e.userSearch,o=e.replies,i=e.replId,c=e.refetch,l=e.linkedToCommentId,p=e.currentUser,b=e.areCommentsEnabled,j=u.useState((function(){return!!l&&o.some((function(e){return e.id===l}))})),f=Object(s.a)(j,2),x=f[0],g=f[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Ne,{onReply:function(){c(),g(!0)},replId:i,replyCount:o.length,repliesExpanded:x,onRepliesToggle:function(){return g(!x)},userSearch:r,comment:t,replyToId:t.id,onDelete:n,linkedToCommentId:l,currentUser:p,parentAuthor:null,areCommentsEnabled:b}),x&&o.length>0?Object(a.jsx)("div",{className:"jsx-1327972039 replies",children:Object(a.jsx)(m.b,{spacing:2,align:"stretch",children:o.map((function(e){return Object(a.jsx)("div",{className:"jsx-1327972039",children:Object(a.jsx)(Ne,{currentUser:p,linkedToCommentId:l,onReply:c,replId:i,userSearch:r,onDelete:n,comment:e,replyToId:t.id,replyCount:0,repliesExpanded:!1,onRepliesToggle:function(){return null},parentAuthor:t.user||null,areCommentsEnabled:b})},e.id)}))})}):null,Object(a.jsx)(d.a,{id:"1327972039",children:[".replies.jsx-1327972039{padding-left:var(--spacing-5);}"]})]})}function Ie(e){var t,n,r=e.replId,l=Object(f.useRouter)().query,p=u.useState(!1),b=Object(s.a)(p,2),x=b[0],g=b[1],h=Object(de.a)(),v=h.showConfirm,O=h.showError,y=Object(j.ke)({variables:{replId:r,after:l.after?l.after.toString():void 0}}),w=y.data,k=y.loading,_=y.fetchMore,C=y.refetch,E=l.c?Number(l.c):void 0,R=u.useState(null),N=Object(s.a)(R,2),P=N[0],I=N[1],U=Object(j.je)({onCompleted:function(e){"UserError"===e.deleteReplComment.__typename?O(e.deleteReplComment.message):"ReplComment"===e.deleteReplComment.__typename&&(v("Comment deleted"),C(),I(null))},onError:function(e){return O(e.message)}}),D=Object(s.a)(U,1)[0],L=Object(j.le)({onError:function(e){return O(e.message)},onCompleted:function(e){var t=e.setReplCommentSettings;if("UserError"===t.__typename)O(t.message);else if("Repl"===t.__typename){var n;null!==(n=t.commentSettings)&&void 0!==n&&n.enabled?v("Comments enabled!"):v("Comments disabled!")}}}),z=Object(s.a)(L,1)[0],T="Repl"===(null===w||void 0===w?void 0:w.repl.__typename)?w.repl:null,M=null===w||void 0===w?void 0:w.currentUser,V=null===T||void 0===T||!T.commentSettings||T.commentSettings.enabled,W=u.useMemo((function(){var e;return(null===T||void 0===T||null===(e=T.comments)||void 0===e?void 0:e.items)||[]}),[null===T||void 0===T?void 0:T.comments.items]),q=null===T||void 0===T||null===(t=T.comments)||void 0===t?void 0:t.pageInfo,A=u.useMemo((function(){var e;if(!T)return[];var t="User"===(null===(e=T.owner)||void 0===e?void 0:e.__typename)?Object(c.a)({},T.owner.username,T.owner):{};return T.comments.items.forEach((function(e){e.user&&(t[e.user.username]=e.user),e.replies&&e.replies.forEach((function(e){null!==e&&void 0!==e&&e.user&&(t[e.user.username]=e.user)}))})),T.permissions.forEach((function(e){e.user&&(t[e.user.username]=e.user)})),M&&delete t[M.username],Object.values(t)}),[T,M]),B=Object(_e.useApolloClient)(),G=u.useCallback(function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.query.toLowerCase(),!((r=A.filter((function(e){var t;return!n||e.username.toLowerCase().includes(n)||(null===(t=e.fullName)||void 0===t?void 0:t.toLowerCase().includes(n))}))).length<t.limit&&t.query)){e.next=7;break}return e.next=5,B.query({query:j.K,variables:t});case 5:e.sent.data.usernameSearch.forEach((function(e){r.some((function(t){return t.username===e.username}))||r.push(e)}));case 7:return e.abrupt("return",r.slice(0,t.limit));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[B,A]),K=u.useMemo((function(){return W?W.reduce((function(e,t){return e+(1+t.replies.length)}),0):null}),[W]);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(m.b,{spacing:3,align:"stretch",children:[Object(a.jsxs)(m.b,{spacing:2,align:"stretch",children:[Object(a.jsxs)(m.a,{justify:"space-between",align:"center",children:[Object(a.jsx)(Re,{totalCount:K,areCommentsEnabled:V}),(null===T||void 0===T||null===(n=T.currentUserPermissions)||void 0===n?void 0:n.changeCommentSettings)&&Object(a.jsxs)(m.a,{align:"center",spacing:2,children:[Object(a.jsx)(S.a,{children:"Allow comments"}),Object(a.jsx)(be.a,{isOn:V,onChange:function(){return z({variables:{input:{replId:T.id,enabled:!V}},optimisticResponse:{setReplCommentSettings:Se(Se({},T),{},{commentSettings:{__typename:"ReplCommentSetting",id:-1,enabled:!V}})}})}})]})]}),M&&V?Object(a.jsx)(ue,{onCreate:function(){return C()},placeholder:T?"Say something about ".concat(T.title):"",replId:r,onCancel:function(){return null},userSearch:G}):null,M||k?null:Object(a.jsxs)("div",{className:"jsx-3084175211 auth-cta",children:[Object(a.jsx)("button",{onClick:function(){return g(!0)},className:"jsx-3084175211",children:"Sign up"})," ","to comment",Object(a.jsx)(fe.a,{isOpen:x,onRequestClose:function(){g(!1)},children:Object(a.jsx)(Ce.a,{onSuccess:function(e){e&&window.location.reload()}})})]})]}),W.map((function(e){return Object(a.jsx)(Pe,{linkedToCommentId:E,refetch:C,replId:r,replies:e.replies,comment:e,onDelete:I,userSearch:G,currentUser:M||null,areCommentsEnabled:V},e.id)})),null!==q&&void 0!==q&&q.nextCursor&&T?Object(a.jsx)("div",{className:"jsx-3084175211 load-more",children:Object(a.jsx)("a",{href:T.url+"?after="+q.nextCursor,onClick:function(e){e.preventDefault(),k||_({variables:{after:q.nextCursor},updateQuery:function(e,t){if(!t||!t.fetchMoreResult)return e;var n="Repl"===e.repl.__typename?e.repl:null;if(!n)return e;var r=t.fetchMoreResult,o="Repl"===r.repl.__typename?r.repl:null;return o?Se(Se({},r),{},{repl:Se(Se({},o),{},{comments:Se(Se({},o.comments),{},{items:[].concat(Object(F.a)(n.comments.items),Object(F.a)(o.comments.items))})})}):e}})},className:"jsx-3084175211",children:k?"Loading...":"Load more comments"})}):null]}),Object(a.jsx)(fe.a,{isOpen:null!==P,onRequestClose:function(){return I(null)},children:Object(a.jsx)(xe.a,{delete:function(){if(null===P)throw new Error("Expected pendingDeleteId");D({variables:{id:P}})},entityType:"Comment",hideModal:function(){return I(null)}})}),Object(a.jsx)(d.a,{id:"3084175211",children:[".auth-cta.jsx-3084175211{padding:var(--spacing-2);border-radius:var(--border-radius-2);background-color:var(--color-primary-transparent-3);}",".auth-cta.jsx-3084175211 button.jsx-3084175211{cursor:pointer;color:var(--color-primary-1);font-size:inherit;padding:1px 2px;border-radius:var(--border-radius-2);border:0 none;-webkit-transition:0.2s background-color;transition:0.2s background-color;-webkit-text-decoration:none !important;text-decoration:none !important;font-weight:var(--font-weight-medium);background-color:transparent;}",".auth-cta.jsx-3084175211 button.jsx-3084175211:hover{background-color:var(--color-control-3);}",".load-more.jsx-3084175211{padding-left:var(--spacing-5);}",".load-more.jsx-3084175211 a.jsx-3084175211{color:var(--color-primary-1);font-size:var(--font-size-desktop-text-small);padding:1px 2px;border-radius:var(--border-radius-2);-webkit-transition:0.2s background-color;transition:0.2s background-color;-webkit-text-decoration:none !important;text-decoration:none !important;font-weight:var(--font-weight-medium);}",".load-more.jsx-3084175211 a.jsx-3084175211:hover{background-color:var(--color-control-3);}"]})]})}var Ue=n("6bXu"),De=n("zgDP"),Le=n("UKf+"),ze=n("5zsw"),Fe=n("TeFj"),Te=n("4Njq"),Me=n("/3ys");function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function We(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qe=Math.random()<.05;function Ae(e){var t=e.repl,n=e.forks,r=e.currentUser;u.useEffect((function(){r&&!t.currentUserPermissions.containerWrite&&Object(De.track)(De.events.REPL_GUEST_VIEW,{page:"replView"})}),[r,t.currentUserPermissions.containerWrite]),u.useEffect((function(){window["flag-excalidraw"]=null===t||void 0===t?void 0:t.hasExcalidrawGate}),[t]);var o=u.useState(!1),i=Object(s.a)(o,2),c=i[0],l=i[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("section",{className:d.a.dynamic([["3035836765",[Te.a]]])+" top",children:[Object(a.jsx)("div",{className:d.a.dynamic([["3035836765",[Te.a]]])+" header-wrap",children:Object(a.jsx)(z,{repl:t,isLoggedIn:Boolean(r)})}),Object(a.jsx)("div",{className:d.a.dynamic([["3035836765",[Te.a]]])+" repl-viewer",children:Object(a.jsx)(x.a,{repl:t,currentUser:r})})]}),Object(a.jsxs)("section",{className:d.a.dynamic([["3035836765",[Te.a]]])+" about-comments-forks",children:[Object(a.jsx)("div",{className:d.a.dynamic([["3035836765",[Te.a]]])+" about",children:Object(a.jsxs)(m.b,{spacing:1,children:[Object(a.jsx)(Ge,{}),Object(a.jsx)(S.a,{size:"medium",fontWeight:"medium",children:"About"}),Object(a.jsxs)(m.b,{spacing:1,children:[Object(a.jsxs)(m.a,{spacing:"4px",wrap:"nowrap",align:"center",children:[Object(a.jsx)("div",{className:d.a.dynamic([["3035836765",[Te.a]]])+" about-icon-wrapper",children:Object(a.jsx)(Le.a,{size:"medium"})}),Object(a.jsxs)(S.a,{foreground:2,size:"small",children:["Created on"," ",new Date(t.timeCreated).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]})]}),t.origin&&t.origin.owner?Object(a.jsxs)(m.a,{align:"center",spacing:"2px",children:[Object(a.jsxs)(m.a,{spacing:"4px",wrap:"nowrap",align:"center",children:[Object(a.jsx)("div",{className:d.a.dynamic([["3035836765",[Te.a]]])+" about-icon-wrapper",children:Object(a.jsx)(Fe.a,{size:"medium"})}),Object(a.jsx)(S.a,{foreground:2,size:"small",children:"Forked from"})]}),Object(a.jsxs)(m.a,{align:"center",children:[Object(a.jsx)(h.a,We(We({},Object(v.c)(t.origin.owner)),{},{children:Object(a.jsx)("a",{className:d.a.dynamic([["3035836765",[Te.a]]])+" username",children:t.origin.owner.username})})),Object(a.jsx)(S.a,{size:"xsmall",foreground:3,children:"/"}),Object(a.jsx)(h.a,We(We({},Object(O.b)(t.origin)),{},{children:Object(a.jsx)("a",{className:d.a.dynamic([["3035836765",[Te.a]]])+" repl",children:t.origin.title})}))]})]}):null]}),t.description?Object(a.jsx)(S.a,{size:"medium",children:t.description}):Object(a.jsx)(S.a,{size:"small",foreground:3,children:"This repl has no description"})]})}),Object(a.jsxs)("div",{className:d.a.dynamic([["3035836765",[Te.a]]])+" comments",children:[t.flagReplReactions?Object(a.jsx)("div",{className:d.a.dynamic([["3035836765",[Te.a]]])+" reactions",children:Object(a.jsx)(ee,{repl:t,currentUser:r})}):null,Object(a.jsx)(Ie,{replId:t.id})]}),Object(a.jsxs)("div",{className:d.a.dynamic([["3035836765",[Te.a]]])+" forks",children:[Object(a.jsx)("div",{className:d.a.dynamic([["3035836765",[Te.a]]])+" forks-heading",children:Object(a.jsxs)(m.a,{spacing:1,justify:"space-between",align:"center",children:[Object(a.jsx)(S.a,{foreground:1,fontWeight:"medium",size:"medium",children:"Forks"}),n.length>5?Object(a.jsx)("div",{className:d.a.dynamic([["3035836765",[Te.a]]])+" see-all-forks-wrap",children:Object(a.jsx)("button",{onClick:function(){l(!0)},className:d.a.dynamic([["3035836765",[Te.a]]])+" see-all-forks",children:"See all"})}):null]})}),n.length>0?Object(a.jsx)("div",{className:d.a.dynamic([["3035836765",[Te.a]]])+" forks-list",children:n.slice(0,5).map((function(e){return Object(a.jsx)("div",{className:d.a.dynamic([["3035836765",[Te.a]]])+" fork-card",children:Object(a.jsx)(_,{repl:e})},e.id)}))}):Object(a.jsx)(S.a,{size:"small",foreground:3,children:"This repl hasn't been forked yet. Give it some love!"})]})]}),Object(a.jsx)(fe.a,{isOpen:c,onRequestClose:function(){return l(!1)},children:Object(a.jsx)(W,{replId:t.id})}),Object(a.jsx)(d.a,{id:"3035836765",dynamic:[Te.a],children:["section.__jsx-style-dynamic-selector{max-width:1000px;margin:0 auto;padding:var(--spacing-2);}",".reactions.__jsx-style-dynamic-selector{margin-bottom:var(--spacing-2);}",".top.__jsx-style-dynamic-selector{padding-bottom:var(--spacing-half);}",".header-wrap.__jsx-style-dynamic-selector{padding:var(--spacing-1) 0;}",".repl-viewer.__jsx-style-dynamic-selector{height:70vh;min-height:400px;max-height:600px;display:grid;}",".forks-heading.__jsx-style-dynamic-selector{padding-bottom:var(--spacing-1);}",".forks-list.__jsx-style-dynamic-selector::-webkit-scrollbar{display:none;}",".fork-card.__jsx-style-dynamic-selector{padding-bottom:var(--spacing-1);}",".see-all-forks-wrap.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}","button.see-all-forks.__jsx-style-dynamic-selector{padding:0;border:0 none;outline:0;background-color:transparent;}","button.__jsx-style-dynamic-selector:focus{outline-offset:2px;box-shadow:0 0 0 3px var(--color-primary-transparent-1);}","a.__jsx-style-dynamic-selector,button.see-all-forks.__jsx-style-dynamic-selector{cursor:pointer;color:var(--color-primary-1);font-size:var(--font-size-desktop-text-small);padding:1px 2px;border-radius:var(--border-radius-2);-webkit-transition:0.2s background-color;transition:0.2s background-color;-webkit-text-decoration:none !important;text-decoration:none !important;font-weight:var(--font-weight-medium);}","a.repl.__jsx-style-dynamic-selector{word-break:break-all;}","a.__jsx-style-dynamic-selector:hover{background-color:var(--color-control-3);}",".about-icon-wrapper.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;color:var(--color-foreground-3);}",".about.__jsx-style-dynamic-selector,.comments.__jsx-style-dynamic-selector,.forks.__jsx-style-dynamic-selector{padding-bottom:var(--spacing-2);}","@media screen and (min-width:".concat(Te.a,"px){.about-comments-forks.__jsx-style-dynamic-selector{display:grid;grid-template-columns:1fr 220px;grid-template-rows:auto 1fr;grid-template-areas: 'comments about' 'comments forks';}.about.__jsx-style-dynamic-selector{grid-area:about;}.comments.__jsx-style-dynamic-selector{grid-area:comments;padding-right:var(--spacing-2);}.forks.__jsx-style-dynamic-selector{grid-area:forks;}.forks-list.__jsx-style-dynamic-selector{max-height:800px;overflow-y:auto;}}")]})]})}var Be="cover-page-banner-open",Ge=function(){var e=u.useState(!1),t=Object(s.a)(e,2),n=t[0],r=t[1];return u.useEffect((function(){var e=null===Me.a.get(Be);r(e)}),[n]),n?Object(a.jsxs)("div",{className:"jsx-1485703979 wrapper",children:[Object(a.jsxs)("div",{className:"jsx-1485703979 banner",children:[Object(a.jsx)("div",{onClick:function(){Me.a.set(Be,!1),r(!1)},className:"jsx-1485703979 close-icon",children:Object(a.jsx)(ze.a,{size:"medium"})}),Object(a.jsxs)(m.b,{spacing:2,children:[Object(a.jsx)(S.a,{size:"medium",fontWeight:"medium",children:"Welcome to the Spotlight \ud83d\udca1"}),Object(a.jsxs)(S.a,{size:"small",foreground:3,children:["This is a",Object(a.jsx)("a",{href:"https://blog.replit.com/spotlight",target:"_blank",onClick:function(){Me.a.set(Be,!1)},className:"jsx-1485703979",children:"\xa0Spotlight page"}),". You can run someone's project, browse their code, and comment here even if they don't give you editing permissions."]})]})]}),Object(a.jsx)(d.a,{id:"1485703979",children:[".close-icon.jsx-1485703979{color:var(--color-foreground-3);cursor:pointer;float:right;}",".close-icon.jsx-1485703979:hover{color:var(--color-foreground-1);}",".wrapper.jsx-1485703979{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;max-width:1000px;margin-top:0;margin-bottom:var(--spacing-2);padding:0;}",".banner.jsx-1485703979{padding:var(--spacing-2);background-color:var(--color-background-1);border-radius:var(--border-radius-2);}","h1.jsx-1485703979{font-size:24px;color:var(--color-primary-1);font-weight:var(--font-weight-bold);}","p.jsx-1485703979{font-family:var(--font-family-sans-serif);color:var(--color-foreground-2);font-size:var(--font-size-desktop-text-medium);width:100%;max-width:750px;}","a.jsx-1485703979{color:var(--color-primary-1);font-weight:var(--font-weight-medium);font-size:var(--font-size-desktop-text-small);}"]})]}):null};function Ke(){return Object(a.jsx)("div",{})}function He(){u.useEffect(Ue.b,[]);var e=Object(f.useRouter)(),t=Object(j.te)({variables:{url:e.query.replUrl.toString(),recentForksCount:6}}),n=t.data,r=t.loading,o="Repl"===(null===n||void 0===n?void 0:n.repl.__typename)?n.repl:null,i=(null===n||void 0===n?void 0:n.currentUser)||void 0,c=null;if(r)c=Object(a.jsx)(Ke,{});else if(o){var s=o.recentForks.filter((function(e){return!!e.owner}));c=Object(a.jsx)(Ae,{repl:o,forks:s,currentUser:i})}return Object(a.jsxs)(p.a,We(We({},function(){var e;if(!o)return{title:"Loading..."};var t=o.description||"A ".concat(o.lang.displayName," repl").concat(o.owner?" by "+o.owner.username:"");return{title:o.title,image:o.imageUrl||(null===(e=o.owner)||void 0===e?void 0:e.image),description:t,oembedUrl:"https://replit.com"+o.url}}()),{},{children:[qe&&Object(a.jsx)("script",{dangerouslySetInnerHTML:{__html:"window['_fs_debug'] = false;\n                        window['_fs_host'] = 'fullstory.com';\n                        window['_fs_script'] = 'edge.fullstory.com/s/fs.js';\n                        window['_fs_org'] = '10JC1E';\n                        window['_fs_namespace'] = 'FS';\n                        (function(m,n,e,t,l,o,g,y){\n                            if (e in m) {if(m.console && m.console.log) { m.console.log('FullStory namespace conflict. Please set window[\"_fs_namespace\"].');} return;}\n                            g=m[e]=function(a,b,s){g.q?g.q.push([a,b,s]):g._api(a,b,s);};g.q=[];\n                            o=n.createElement(t);o.async=1;o.crossOrigin='anonymous';o.src='https://'+_fs_script;\n                            y=n.getElementsByTagName(t)[0];y.parentNode.insertBefore(o,y);\n                            g.identify=function(i,v,s){g(l,{uid:i},s);if(v)g(l,v,s)};g.setUserVars=function(v,s){g(l,v,s)};g.event=function(i,v,s){g('event',{n:i,p:v},s)};\n                            g.anonymize=function(){g.identify(!!0)};\n                            g.shutdown=function(){g(\"rec\",!1)};g.restart=function(){g(\"rec\",!0)};\n                            g.log = function(a,b){g(\"log\",[a,b])};\n                            g.consent=function(a){g(\"consent\",!arguments.length||a)};\n                            g.identifyAccount=function(i,v){o='account';v=v||{};v.acctId=i;g(o,v)};\n                            g.clearUserCookie=function(){};\n                            g.setVars=function(n, p){g('setVars',[n,p]);};\n                            g._w={};y='XMLHttpRequest';g._w[y]=m[y];y='fetch';g._w[y]=m[y];\n                            if(m[y])m[y]=function(){return g._w[y].apply(this,arguments)};\n                            g._v=\"1.3.0\";\n                        })(window,document,window['_fs_namespace'],'script','user');"},className:"jsx-1988144270"}),c,Object(a.jsx)(d.a,{id:"1988144270",children:[".replit-ui-theme-root{background-color:var(--color-background-2);color:var(--color-foreground-1);}"]})]}))}He.getInitialProps=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.req,r=t.store,e.next=3,Object(b.a)(n,r);case 3:return e.abrupt("return",{});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.default=He},oOwn:function(e,t,n){!function(){var t=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],n="undefined"!==typeof window,r=n&&null!=window.mozInnerScreenX;function o(e,o,i){if(!n)throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser");var a=i&&i.debug||!1;if(a){var c=document.querySelector("#input-textarea-caret-position-mirror-div");c&&c.parentNode.removeChild(c)}var s=document.createElement("div");s.id="input-textarea-caret-position-mirror-div",document.body.appendChild(s);var l=s.style,d=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,u="INPUT"===e.nodeName;l.whiteSpace="pre-wrap",u||(l.wordWrap="break-word"),l.position="absolute",a||(l.visibility="hidden"),t.forEach((function(e){u&&"lineHeight"===e?l.lineHeight=d.height:l[e]=d[e]})),r?e.scrollHeight>parseInt(d.height)&&(l.overflowY="scroll"):l.overflow="hidden",s.textContent=e.value.substring(0,o),u&&(s.textContent=s.textContent.replace(/\s/g,"\xa0"));var p=document.createElement("span");p.textContent=e.value.substring(o)||".",s.appendChild(p);var b={top:p.offsetTop+parseInt(d.borderTopWidth),left:p.offsetLeft+parseInt(d.borderLeftWidth),height:parseInt(d.lineHeight)};return a?p.style.backgroundColor="#aaa":document.body.removeChild(s),b}"undefined"!=typeof e.exports?e.exports=o:n&&(window.getCaretCoordinates=o)}()},zWI3:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/replView",function(){return n("o/6W")}])},zZPE:function(e,t){var n,r,o=Function.prototype,i=Object.prototype,a=o.toString,c=i.hasOwnProperty,s=a.call(Object),l=i.toString,d=(n=Object.getPrototypeOf,r=Object,function(e){return n(r(e))});e.exports=function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=l.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}(e))return!1;var t=d(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&a.call(n)==s}}},[[69,2,1,16,0,3,4,5,6,7,11,9,12,13,17,14,15,18,21,23,22,26,27,29,32,58]]]);